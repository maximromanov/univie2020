<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>8 Lesson 08 | 070172-1 UE Methodological course - Introduction to DH: Tools &amp; Techniques (2020W) Memex Edition</title>
  <meta name="description" content="This is a collection of relevant materials for the class ‘070172-1 UE Methodological course - Introduction to DH: Tools &amp; Techniques (2020W) Memex Edition’, offered at the University of Vienna and taught by Maxim G. Romanov" />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="8 Lesson 08 | 070172-1 UE Methodological course - Introduction to DH: Tools &amp; Techniques (2020W) Memex Edition" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://maximromanov.github.io/univie2020/" />
  
  <meta property="og:description" content="This is a collection of relevant materials for the class ‘070172-1 UE Methodological course - Introduction to DH: Tools &amp; Techniques (2020W) Memex Edition’, offered at the University of Vienna and taught by Maxim G. Romanov" />
  <meta name="github-repo" content="maximromanov/univie2020" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="8 Lesson 08 | 070172-1 UE Methodological course - Introduction to DH: Tools &amp; Techniques (2020W) Memex Edition" />
  
  <meta name="twitter:description" content="This is a collection of relevant materials for the class ‘070172-1 UE Methodological course - Introduction to DH: Tools &amp; Techniques (2020W) Memex Edition’, offered at the University of Vienna and taught by Maxim G. Romanov" />
  

<meta name="author" content="Maxim G. Romanov" />


<meta name="date" content="2021-01-08" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <link rel="apple-touch-icon-precomposed" sizes="120x120" href="touch-icon.png" />
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<link rel="prev" href="lesson-07.html"/>
<link rel="next" href="lesson-09.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<script src="libs/viz-1.8.2/viz.js"></script>
<link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
<script src="libs/grViz-binding-1.0.6.1/grViz.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">070172 UE Methodological course - Introduction to DH: Tools & Techniques (2020W), <i>Memex Edition</i></a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preliminaries</a></li>
<li class="chapter" data-level="" data-path="memex-and-zettelkasten.html"><a href="memex-and-zettelkasten.html"><i class="fa fa-check"></i>Memex and Zettelkasten</a><ul>
<li class="chapter" data-level="" data-path="memex-and-zettelkasten.html"><a href="memex-and-zettelkasten.html#on-memex"><i class="fa fa-check"></i>On Memex</a></li>
<li class="chapter" data-level="" data-path="memex-and-zettelkasten.html"><a href="memex-and-zettelkasten.html#on-zettelkasten"><i class="fa fa-check"></i>On Zettelkasten</a><ul>
<li><a href="memex-and-zettelkasten.html#niklas-luhmann-on-his-zettelkasten">Niklas Luhmann on his <em>Zettelkasten</em></a></li>
<li><a href="memex-and-zettelkasten.html#others-on-luhmanns-zettelkasten">Others on Luhmann’s <em>Zettelkasten</em></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="work-plan.html"><a href="work-plan.html"><i class="fa fa-check"></i>Work Plan</a><ul>
<li class="chapter" data-level="" data-path="work-plan.html"><a href="work-plan.html#memex-building-cycle"><i class="fa fa-check"></i>Memex-Building Cycle</a></li>
<li class="chapter" data-level="" data-path="work-plan.html"><a href="work-plan.html#research-cycle"><i class="fa fa-check"></i>Research Cycle</a><ul>
<li class="chapter" data-level="" data-path="work-plan.html"><a href="work-plan.html#building-trails"><i class="fa fa-check"></i>Building Trails</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="1" data-path="lesson-01.html"><a href="lesson-01.html"><i class="fa fa-check"></i><b>1</b> Lesson 01</a><ul>
<li class="chapter" data-level="1.1" data-path="lesson-01.html"><a href="lesson-01.html#bibliography-managers"><i class="fa fa-check"></i><b>1.1</b> Bibliography Managers</a></li>
<li class="chapter" data-level="1.2" data-path="lesson-01.html"><a href="lesson-01.html#zotero"><i class="fa fa-check"></i><b>1.2</b> Zotero</a><ul>
<li class="chapter" data-level="1.2.1" data-path="lesson-01.html"><a href="lesson-01.html#getting-started"><i class="fa fa-check"></i><b>1.2.1</b> Getting Started</a></li>
<li class="chapter" data-level="1.2.2" data-path="lesson-01.html"><a href="lesson-01.html#main-functionality"><i class="fa fa-check"></i><b>1.2.2</b> Main Functionality</a></li>
<li class="chapter" data-level="1.2.3" data-path="lesson-01.html"><a href="lesson-01.html#additional-functionality-plug-ins"><i class="fa fa-check"></i><b>1.2.3</b> Additional Functionality: Plug-Ins</a></li>
<li class="chapter" data-level="1.2.4" data-path="lesson-01.html"><a href="lesson-01.html#zotfile"><i class="fa fa-check"></i><b>1.2.4</b> Zotfile</a></li>
<li class="chapter" data-level="1.2.5" data-path="lesson-01.html"><a href="lesson-01.html#better-bibtex-for-zotero"><i class="fa fa-check"></i><b>1.2.5</b> Better BibTeX for Zotero</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="lesson-01.html"><a href="lesson-01.html#HWL01"><i class="fa fa-check"></i><b>1.3</b> Homework</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="lesson-02.html"><a href="lesson-02.html"><i class="fa fa-check"></i><b>2</b> Lesson 02</a><ul>
<li class="chapter" data-level="2.1" data-path="lesson-02.html"><a href="lesson-02.html#command-line"><i class="fa fa-check"></i><b>2.1</b> Command Line</a><ul>
<li class="chapter" data-level="2.1.1" data-path="lesson-02.html"><a href="lesson-02.html#the-filesystem"><i class="fa fa-check"></i><b>2.1.1</b> The filesystem</a></li>
<li class="chapter" data-level="2.1.2" data-path="lesson-02.html"><a href="lesson-02.html#getting-started-with-the-command-line"><i class="fa fa-check"></i><b>2.1.2</b> Getting started with the command line</a></li>
<li class="chapter" data-level="2.1.3" data-path="lesson-02.html"><a href="lesson-02.html#components-of-the-command-line"><i class="fa fa-check"></i><b>2.1.3</b> Components of the command line</a></li>
<li class="chapter" data-level="2.1.4" data-path="lesson-02.html"><a href="lesson-02.html#file-paths-and-path-notations"><i class="fa fa-check"></i><b>2.1.4</b> File paths and path notations</a></li>
<li class="chapter" data-level="2.1.5" data-path="lesson-02.html"><a href="lesson-02.html#command-line-arguments"><i class="fa fa-check"></i><b>2.1.5</b> Command line arguments</a></li>
<li class="chapter" data-level="2.1.6" data-path="lesson-02.html"><a href="lesson-02.html#more-commands"><i class="fa fa-check"></i><b>2.1.6</b> More commands</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="lesson-02.html"><a href="lesson-02.html#HWL02"><i class="fa fa-check"></i><b>2.2</b> Homework</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="lesson-03.html"><a href="lesson-03.html"><i class="fa fa-check"></i><b>3</b> Lesson 03</a><ul>
<li class="chapter" data-level="3.1" data-path="lesson-03.html"><a href="lesson-03.html#version-control-and-collaboration"><i class="fa fa-check"></i><b>3.1</b> Version Control and Collaboration</a></li>
<li class="chapter" data-level="3.2" data-path="lesson-03.html"><a href="lesson-03.html#setting-up-git"><i class="fa fa-check"></i><b>3.2</b> Setting-up <code>git</code></a></li>
<li class="chapter" data-level="3.3" data-path="lesson-03.html"><a href="lesson-03.html#general-git-workflow"><i class="fa fa-check"></i><b>3.3</b> General <code>git</code> workflow</a></li>
<li class="chapter" data-level="3.4" data-path="lesson-03.html"><a href="lesson-03.html#main-git-commands"><i class="fa fa-check"></i><b>3.4</b> Main <code>git</code> Commands</a></li>
<li class="chapter" data-level="3.5" data-path="lesson-03.html"><a href="lesson-03.html#some-useful-command-line-commands-to-remember"><i class="fa fa-check"></i><b>3.5</b> Some useful command line commands to remember</a></li>
<li class="chapter" data-level="3.6" data-path="lesson-03.html"><a href="lesson-03.html#practice"><i class="fa fa-check"></i><b>3.6</b> Practice</a></li>
<li class="chapter" data-level="3.7" data-path="lesson-03.html"><a href="lesson-03.html#HWL03"><i class="fa fa-check"></i><b>3.7</b> Homework</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="lesson-04.html"><a href="lesson-04.html"><i class="fa fa-check"></i><b>4</b> Lesson 04</a><ul>
<li class="chapter" data-level="4.1" data-path="lesson-04.html"><a href="lesson-04.html#sustainable-academic-writing-with-markdown-pandoc-and-the-tex-family"><i class="fa fa-check"></i><b>4.1</b> Sustainable Academic Writing with <code>markdown</code>, <code>pandoc</code>, and the <code>*TeX</code> family</a></li>
<li class="chapter" data-level="4.2" data-path="lesson-04.html"><a href="lesson-04.html#class-notes"><i class="fa fa-check"></i><b>4.2</b> Class Notes</a></li>
<li class="chapter" data-level="4.3" data-path="lesson-04.html"><a href="lesson-04.html#pandoc-commands"><i class="fa fa-check"></i><b>4.3</b> <code>pandoc</code> <em>Commands</em></a></li>
<li class="chapter" data-level="4.4" data-path="lesson-04.html"><a href="lesson-04.html#writing-with-markdown-in-atom"><i class="fa fa-check"></i><b>4.4</b> Writing with markdown in Atom</a></li>
<li class="chapter" data-level="4.5" data-path="lesson-04.html"><a href="lesson-04.html#reference-materials"><i class="fa fa-check"></i><b>4.5</b> Reference Materials:</a></li>
<li class="chapter" data-level="4.6" data-path="lesson-04.html"><a href="lesson-04.html#HWL04"><i class="fa fa-check"></i><b>4.6</b> Homework</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="lesson-05.html"><a href="lesson-05.html"><i class="fa fa-check"></i><b>5</b> Lesson 05</a><ul>
<li class="chapter" data-level="5.1" data-path="lesson-05.html"><a href="lesson-05.html#constructing-robust-searches"><i class="fa fa-check"></i><b>5.1</b> Constructing Robust Searches</a></li>
<li class="chapter" data-level="5.2" data-path="lesson-05.html"><a href="lesson-05.html#regular-expressions"><i class="fa fa-check"></i><b>5.2</b> <code>regular expressions</code></a><ul>
<li class="chapter" data-level="5.2.1" data-path="lesson-05.html"><a href="lesson-05.html#what-are-regular-expressions"><i class="fa fa-check"></i><b>5.2.1</b> What are <code>regular expressions</code>?**</a></li>
<li class="chapter" data-level="5.2.2" data-path="lesson-05.html"><a href="lesson-05.html#what-would-we-use-regular-expressions-for"><i class="fa fa-check"></i><b>5.2.2</b> What would we use <code>regular Expressions</code> for?</a></li>
<li class="chapter" data-level="5.2.3" data-path="lesson-05.html"><a href="lesson-05.html#the-basics"><i class="fa fa-check"></i><b>5.2.3</b> The Basics</a></li>
<li class="chapter" data-level="5.2.4" data-path="lesson-05.html"><a href="lesson-05.html#characters-special-characters"><i class="fa fa-check"></i><b>5.2.4</b> Characters <em>&amp;</em> Special Characters</a></li>
<li class="chapter" data-level="5.2.5" data-path="lesson-05.html"><a href="lesson-05.html#character-classes"><i class="fa fa-check"></i><b>5.2.5</b> Character Classes: <code>[]</code></a></li>
<li class="chapter" data-level="5.2.6" data-path="lesson-05.html"><a href="lesson-05.html#ranges-within-classes"><i class="fa fa-check"></i><b>5.2.6</b> Ranges (within classes)</a></li>
<li class="chapter" data-level="5.2.7" data-path="lesson-05.html"><a href="lesson-05.html#repeaters"><i class="fa fa-check"></i><b>5.2.7</b> Repeaters</a></li>
<li class="chapter" data-level="5.2.8" data-path="lesson-05.html"><a href="lesson-05.html#lab-intro-in-the-practicum-file."><i class="fa fa-check"></i><b>5.2.8</b> Lab: <em>Intro</em> (in the <em>practicum file</em>).</a></li>
<li class="chapter" data-level="5.2.9" data-path="lesson-05.html"><a href="lesson-05.html#anchoring"><i class="fa fa-check"></i><b>5.2.9</b> Anchoring</a></li>
<li class="chapter" data-level="5.2.10" data-path="lesson-05.html"><a href="lesson-05.html#alternation-pipe"><i class="fa fa-check"></i><b>5.2.10</b> Alternation: “|” (<em>pipe</em>)</a></li>
<li class="chapter" data-level="5.2.11" data-path="lesson-05.html"><a href="lesson-05.html#grouping"><i class="fa fa-check"></i><b>5.2.11</b> Grouping</a></li>
<li class="chapter" data-level="5.2.12" data-path="lesson-05.html"><a href="lesson-05.html#lab-part-i-in-the-practicum-file."><i class="fa fa-check"></i><b>5.2.12</b> Lab: Part I (in the <em>practicum file</em>).</a></li>
<li class="chapter" data-level="5.2.13" data-path="lesson-05.html"><a href="lesson-05.html#replacement"><i class="fa fa-check"></i><b>5.2.13</b> Replacement</a></li>
<li class="chapter" data-level="5.2.14" data-path="lesson-05.html"><a href="lesson-05.html#capture"><i class="fa fa-check"></i><b>5.2.14</b> Capture</a></li>
<li class="chapter" data-level="5.2.15" data-path="lesson-05.html"><a href="lesson-05.html#capture-reformat"><i class="fa fa-check"></i><b>5.2.15</b> Capture <em>&amp;</em> Reformat</a></li>
<li class="chapter" data-level="5.2.16" data-path="lesson-05.html"><a href="lesson-05.html#lab-part-ii-in-the-practicum-file."><i class="fa fa-check"></i><b>5.2.16</b> Lab: Part II (in the <em>practicum file</em>).</a></li>
<li class="chapter" data-level="5.2.17" data-path="lesson-05.html"><a href="lesson-05.html#to-keep-in-mind"><i class="fa fa-check"></i><b>5.2.17</b> <em>To keep in mind</em></a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="lesson-05.html"><a href="lesson-05.html#class-materials"><i class="fa fa-check"></i><b>5.3</b> Class materials</a></li>
<li class="chapter" data-level="5.4" data-path="lesson-05.html"><a href="lesson-05.html#digital-materials"><i class="fa fa-check"></i><b>5.4</b> Digital materials</a></li>
<li class="chapter" data-level="5.5" data-path="lesson-04.html"><a href="lesson-04.html#reference-materials"><i class="fa fa-check"></i><b>5.5</b> Reference Materials</a></li>
<li class="chapter" data-level="5.6" data-path="lesson-05.html"><a href="lesson-05.html#HWL05"><i class="fa fa-check"></i><b>5.6</b> Homework</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="lesson-06.html"><a href="lesson-06.html"><i class="fa fa-check"></i><b>6</b> Lesson 06</a><ul>
<li class="chapter" data-level="6.1" data-path="lesson-06.html"><a href="lesson-06.html#understanding-structured-data"><i class="fa fa-check"></i><b>6.1</b> Understanding Structured Data</a><ul>
<li class="chapter" data-level="6.1.1" data-path="lesson-06.html"><a href="lesson-06.html#xml-extensible-markup-language"><i class="fa fa-check"></i><b>6.1.1</b> XML (<em>Extensible Markup Language</em>)</a></li>
<li class="chapter" data-level="6.1.2" data-path="lesson-06.html"><a href="lesson-06.html#csvtsv-comma-separated-values-tab-separated-values"><i class="fa fa-check"></i><b>6.1.2</b> CSV/TSV (<em>Comma-Separated Values</em>/ <em>Tab-Separated Values</em>)</a></li>
<li class="chapter" data-level="6.1.3" data-path="lesson-06.html"><a href="lesson-06.html#json-javascript-object-notation"><i class="fa fa-check"></i><b>6.1.3</b> JSON (<em>JavaScript Object Notation</em>)</a></li>
<li class="chapter" data-level="6.1.4" data-path="lesson-06.html"><a href="lesson-06.html#yml-or-yaml-yet-another-markup-language-yaml-aint-markup-language"><i class="fa fa-check"></i><b>6.1.4</b> YML or YAML (<em>Yet Another Markup Language</em> &gt; <em>YAML Ain’t Markup Language</em>)</a></li>
<li class="chapter" data-level="6.1.5" data-path="lesson-06.html"><a href="lesson-06.html#bibtex-most-common-bibliographic-format"><i class="fa fa-check"></i><b>6.1.5</b> <code>BibTeX</code>: <em>most common bibliographic format</em></a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="lesson-06.html"><a href="lesson-06.html#larger-examples"><i class="fa fa-check"></i><b>6.2</b> Larger Examples</a><ul>
<li class="chapter" data-level="6.2.1" data-path="lesson-06.html"><a href="lesson-06.html#csv-tsv"><i class="fa fa-check"></i><b>6.2.1</b> <code>CSV</code> / <code>TSV</code></a></li>
<li class="chapter" data-level="6.2.2" data-path="lesson-06.html"><a href="lesson-06.html#json"><i class="fa fa-check"></i><b>6.2.2</b> <code>JSON</code></a></li>
<li class="chapter" data-level="6.2.3" data-path="lesson-06.html"><a href="lesson-06.html#ymlyaml"><i class="fa fa-check"></i><b>6.2.3</b> <code>YML</code>/<code>YAML</code></a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="lesson-06.html"><a href="lesson-06.html#in-class-practice"><i class="fa fa-check"></i><b>6.3</b> In-Class Practice</a></li>
<li class="chapter" data-level="6.4" data-path="lesson-06.html"><a href="lesson-06.html#HWL06"><i class="fa fa-check"></i><b>6.4</b> Homework</a></li>
<li class="chapter" data-level="6.5" data-path="lesson-06.html"><a href="lesson-06.html#HWL06S"><i class="fa fa-check"></i><b>6.5</b> Homework Solution</a><ul>
<li class="chapter" data-level="6.5.1" data-path="lesson-06.html"><a href="lesson-06.html#pseudocode-solution"><i class="fa fa-check"></i><b>6.5.1</b> Pseudocode solution</a></li>
<li class="chapter" data-level="6.5.2" data-path="lesson-06.html"><a href="lesson-06.html#scripts"><i class="fa fa-check"></i><b>6.5.2</b> Scripts</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="lesson-07.html"><a href="lesson-07.html"><i class="fa fa-check"></i><b>7</b> Lesson 07</a><ul>
<li class="chapter" data-level="7.1" data-path="lesson-07.html"><a href="lesson-07.html#building-memex---step-1"><i class="fa fa-check"></i><b>7.1</b> Building Memex - Step 1</a><ul>
<li class="chapter" data-level="7.1.1" data-path="lesson-07.html"><a href="lesson-07.html#pseudocode"><i class="fa fa-check"></i><b>7.1.1</b> Pseudocode</a></li>
<li class="chapter" data-level="7.1.2" data-path="lesson-07.html"><a href="lesson-07.html#code-snippets"><i class="fa fa-check"></i><b>7.1.2</b> Code snippets</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="lesson-06.html"><a href="lesson-06.html#HWL06"><i class="fa fa-check"></i><b>7.2</b> Homework</a></li>
<li class="chapter" data-level="7.3" data-path="lesson-07.html"><a href="lesson-07.html#HWL07S"><i class="fa fa-check"></i><b>7.3</b> Homework Solution</a><ul>
<li class="chapter" data-level="7.3.1" data-path="lesson-07.html"><a href="lesson-07.html#pseudocode-1"><i class="fa fa-check"></i><b>7.3.1</b> Pseudocode</a></li>
<li class="chapter" data-level="7.3.2" data-path="lesson-07.html"><a href="lesson-07.html#note-on-folderfile-organization"><i class="fa fa-check"></i><b>7.3.2</b> Note on Folder/File Organization</a></li>
<li class="chapter" data-level="7.3.3" data-path="lesson-07.html"><a href="lesson-07.html#script-1_build_structure.py"><i class="fa fa-check"></i><b>7.3.3</b> Script (<code>1_build_structure.py</code>)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="lesson-08.html"><a href="lesson-08.html"><i class="fa fa-check"></i><b>8</b> Lesson 08</a><ul>
<li class="chapter" data-level="8.1" data-path="lesson-08.html"><a href="lesson-08.html#building-memex---step-2"><i class="fa fa-check"></i><b>8.1</b> Building Memex - Step 2</a></li>
<li class="chapter" data-level="8.2" data-path="lesson-08.html"><a href="lesson-08.html#ocr-software-tesseract"><i class="fa fa-check"></i><b>8.2</b> OCR software: Tesseract</a></li>
<li class="chapter" data-level="8.3" data-path="lesson-08.html"><a href="lesson-08.html#task-general-map-pseudocode"><i class="fa fa-check"></i><b>8.3</b> Task: General Map Pseudocode</a></li>
<li class="chapter" data-level="8.4" data-path="lesson-08.html"><a href="lesson-08.html#code-snippets-functions"><i class="fa fa-check"></i><b>8.4</b> Code snippets &amp; functions</a><ul>
<li class="chapter" data-level="8.4.1" data-path="lesson-08.html"><a href="lesson-08.html#new-libraries"><i class="fa fa-check"></i><b>8.4.1</b> New libraries</a></li>
<li class="chapter" data-level="8.4.2" data-path="lesson-08.html"><a href="lesson-08.html#code-reuse"><i class="fa fa-check"></i><b>8.4.2</b> Code Reuse</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="lesson-08.html"><a href="lesson-08.html#clean-temporary-copy-of-a-pdf"><i class="fa fa-check"></i><b>8.5</b> Clean Temporary Copy of a PDF</a><ul>
<li class="chapter" data-level="8.5.1" data-path="lesson-08.html"><a href="lesson-08.html#ocr-ing-pdf"><i class="fa fa-check"></i><b>8.5.1</b> OCR-ing PDF</a></li>
<li class="chapter" data-level="8.5.2" data-path="lesson-08.html"><a href="lesson-08.html#missing-functions"><i class="fa fa-check"></i><b>8.5.2</b> Missing functions</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="lesson-08.html"><a href="lesson-08.html#one-more-note-on-ocr"><i class="fa fa-check"></i><b>8.6</b> One more note on OCR</a></li>
<li class="chapter" data-level="8.7" data-path="lesson-08.html"><a href="lesson-08.html#HWL08"><i class="fa fa-check"></i><b>8.7</b> Homework</a></li>
<li class="chapter" data-level="8.8" data-path="lesson-08.html"><a href="lesson-08.html#HWL08S"><i class="fa fa-check"></i><b>8.8</b> Homework Solution</a></li>
<li class="chapter" data-level="8.9" data-path="lesson-08.html"><a href="lesson-08.html#tesseract-language-codes"><i class="fa fa-check"></i><b>8.9</b> Tesseract Language Codes</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="lesson-09.html"><a href="lesson-09.html"><i class="fa fa-check"></i><b>9</b> Lesson 09</a><ul>
<li class="chapter" data-level="9.1" data-path="lesson-09.html"><a href="lesson-09.html#building-memex---step-3"><i class="fa fa-check"></i><b>9.1</b> Building Memex - Step 3</a></li>
<li class="chapter" data-level="9.2" data-path="lesson-08.html"><a href="lesson-08.html#code-snippets-functions"><i class="fa fa-check"></i><b>9.2</b> Code snippets &amp; functions</a><ul>
<li class="chapter" data-level="9.2.1" data-path="lesson-09.html"><a href="lesson-09.html#the-main-function-publication-interface"><i class="fa fa-check"></i><b>9.2.1</b> The main function: Publication Interface</a></li>
<li class="chapter" data-level="9.2.2" data-path="lesson-09.html"><a href="lesson-09.html#additional-functions"><i class="fa fa-check"></i><b>9.2.2</b> Additional functions</a></li>
<li class="chapter" data-level="9.2.3" data-path="lesson-09.html"><a href="lesson-09.html#extra-function"><i class="fa fa-check"></i><b>9.2.3</b> Extra function</a></li>
<li class="chapter" data-level="9.2.4" data-path="lesson-08.html"><a href="lesson-08.html#code-reuse"><i class="fa fa-check"></i><b>9.2.4</b> Code Reuse</a></li>
<li class="chapter" data-level="9.2.5" data-path="lesson-09.html"><a href="lesson-09.html#missing-functions-the-index-page-and-the-contents-page"><i class="fa fa-check"></i><b>9.2.5</b> Missing functions: The Index Page and the Contents Page</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="lesson-09.html"><a href="lesson-09.html#HWL09"><i class="fa fa-check"></i><b>9.3</b> Homework</a></li>
<li class="chapter" data-level="9.4" data-path="lesson-09.html"><a href="lesson-09.html#HWL09S"><i class="fa fa-check"></i><b>9.4</b> Homework Solution</a></li>
<li class="chapter" data-level="9.5" data-path="lesson-09.html"><a href="lesson-09.html#additional-materials-html-css-tfidf"><i class="fa fa-check"></i><b>9.5</b> Additional materials: HTML, CSS; TFIDF</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="lesson-10.html"><a href="lesson-10.html"><i class="fa fa-check"></i><b>10</b> Lesson 10</a><ul>
<li class="chapter" data-level="10.1" data-path="lesson-10.html"><a href="lesson-10.html#building-memex---step-4"><i class="fa fa-check"></i><b>10.1</b> Building Memex - Step 4</a></li>
<li class="chapter" data-level="10.2" data-path="lesson-10.html"><a href="lesson-10.html#some-explanations-tf-idf-document-distance"><i class="fa fa-check"></i><b>10.2</b> Some explanations: TF-IDF, Document Distance</a></li>
<li class="chapter" data-level="10.3" data-path="lesson-10.html"><a href="lesson-10.html#practicalities"><i class="fa fa-check"></i><b>10.3</b> Practicalities</a></li>
<li class="chapter" data-level="10.4" data-path="lesson-10.html"><a href="lesson-10.html#CSL10"><i class="fa fa-check"></i><b>10.4</b> Code Snippets</a><ul>
<li class="chapter" data-level="10.4.1" data-path="lesson-10.html"><a href="lesson-10.html#aggregating-publications-into-a-corpus"><i class="fa fa-check"></i><b>10.4.1</b> Aggregating publications into a corpus</a></li>
<li class="chapter" data-level="10.4.2" data-path="lesson-10.html"><a href="lesson-10.html#getting-tf-idf-values-and-distance-matrix-with-sklearn"><i class="fa fa-check"></i><b>10.4.2</b> Getting <em>tf-idf</em> Values and Distance Matrix with <code>sklearn</code></a></li>
<li class="chapter" data-level="10.4.3" data-path="lesson-10.html"><a href="lesson-10.html#converting-results"><i class="fa fa-check"></i><b>10.4.3</b> Converting Results</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="lesson-10.html"><a href="lesson-10.html#HWL10"><i class="fa fa-check"></i><b>10.5</b> Homework</a></li>
<li class="chapter" data-level="10.6" data-path="lesson-10.html"><a href="lesson-10.html#HWL10S"><i class="fa fa-check"></i><b>10.6</b> Homework Solution</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="syllabus.html"><a href="syllabus.html"><i class="fa fa-check"></i>Syllabus</a><ul>
<li class="chapter" data-level="" data-path="syllabus.html"><a href="syllabus.html#course-details"><i class="fa fa-check"></i>Course Details</a></li>
<li class="chapter" data-level="" data-path="syllabus.html"><a href="syllabus.html#aims-contents-and-method-of-the-course"><i class="fa fa-check"></i>Aims, Contents and Method of the Course</a></li>
<li class="chapter" data-level="" data-path="syllabus.html"><a href="syllabus.html#course-evaluation"><i class="fa fa-check"></i>Course Evaluation</a></li>
<li class="chapter" data-level="" data-path="syllabus.html"><a href="syllabus.html#class-participation"><i class="fa fa-check"></i>Class Participation</a></li>
<li class="chapter" data-level="" data-path="syllabus.html"><a href="syllabus.html#homework-assignments"><i class="fa fa-check"></i>Homework Assignments</a></li>
<li class="chapter" data-level="" data-path="syllabus.html"><a href="syllabus.html#final-project"><i class="fa fa-check"></i>Final Project</a></li>
<li class="chapter" data-level="" data-path="syllabus.html"><a href="syllabus.html#study-materials"><i class="fa fa-check"></i>Study materials</a></li>
<li class="chapter" data-level="" data-path="syllabus.html"><a href="syllabus.html#software-tools-technologies"><i class="fa fa-check"></i>Software, Tools, &amp; Technologies</a></li>
<li class="chapter" data-level="" data-path="syllabus.html"><a href="syllabus.html#schedule"><i class="fa fa-check"></i>Schedule</a></li>
<li class="chapter" data-level="" data-path="syllabus.html"><a href="syllabus.html#lesson-topics"><i class="fa fa-check"></i>Lesson Topics</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">070172-1 UE Methodological course - Introduction to DH: Tools &amp; Techniques (2020W) <code>Memex Edition</code></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="lesson-08" class="section level1">
<h1><span class="header-section-number">8</span> Lesson 08</h1>
<div id="building-memex---step-2" class="section level2">
<h2><span class="header-section-number">8.1</span> Building Memex - Step 2</h2>
<p>Now that we have all files and foolders created, we need to extract text from PDFs. We can use OCR, or (<a href="https://en.wikipedia.org/wiki/Optical_character_recognition"><em>optical character recognition</em></a>), — a method that allows us to extract editable text from images containing text.</p>
</div>
<div id="ocr-software-tesseract" class="section level2">
<h2><span class="header-section-number">8.2</span> OCR software: Tesseract</h2>
<p>In order to run OCR, we need to have a suitable software installed on our computers. Tesseract is one of such options—it is free and open source OCR engine. We will need to install Tesseract and some Python libraries that “cooperate” with Tesseract. Keep in mind that usually OCR is language specific, i.e. you also need to have additional files for relevant languages installed; and when you run an OCR procedure, you need to explicitely declare the language that you want to recognize (details below). Language codes used in Tesseract can be found at the end of this lesson (you can also find suggestions on how to deal with automatic language selection in your Python code).</p>
<p>General information on how to make Tesseract work on your machine can be found <a href="https://tesseract-ocr.github.io/tessdoc/Installation.html">here</a>.</p>
<div id="installing-on-mac" class="section level4">
<h4><span class="header-section-number">8.2.0.1</span> Installing on Mac</h4>
<p>We can use <code>brew</code> to install everything we need on Mac:</p>
<pre class="shell"><code>brew install tesseract</code></pre>
<p>Support for additional languages can be installed in the following manner (<code>lang</code> is the language code that Tesseract uses to refer to a specific language):</p>
<pre class="shell"><code>brew install tesseract-lang</code></pre>
<p>The following command will list all available languages (as language codes). This will work only after you have installed Tesseract.</p>
<pre class="shell"><code>tesseract --list-langs</code></pre>
</div>
<div id="installing-on-linux" class="section level4">
<h4><span class="header-section-number">8.2.0.2</span> Installing on Linux</h4>
<pre class="shell"><code>sudo apt install tesseract-ocr
sudo apt install libtesseract-dev</code></pre>
<p>On how to install additional languages, see <a href="https://tesseract-ocr.github.io/tessdoc/Installation.html">here</a>.</p>
</div>
<div id="installing-on-windows" class="section level4">
<h4><span class="header-section-number">8.2.0.3</span> Installing on Windows</h4>
<p>(<strong>Source:</strong> <a href="https://automaticaddison.com/how-to-set-up-anaconda-for-windows-10/" class="uri">https://automaticaddison.com/how-to-set-up-anaconda-for-windows-10/</a>)</p>
<ul>
<li>Go to <a href="https://github.com/UB-Mannheim/tesseract/wiki">Tesseract at UB Mannheim</a>.</li>
<li>Download the Tesseract installer (64-bit).</li>
<li>Run the installe and follow the the prompts. (You can choose additional languages during the installation.)</li>
</ul>
<p><img src="images/tesseract01.jpg" /></p>
<ul>
<li>Once Tesseract OCR is downloaded and installed, find it on your system.</li>
<li>Copy the name of the folder where it is located. The default path is <code>C:\Program Files\Tesseract-OCR</code></li>
<li>Search for “Environment Variables” on your computer. (“Environment Variable” is a button in “System Properties”, Tab “Advanced”)</li>
</ul>
<p><img src="images/tesseract02.jpg" /></p>
<ul>
<li>Under “System Variables,” select “Path”, and then click “Edit”.</li>
<li>Add the path: <code>C:\Program Files\Tesseract-OCR</code> (or whatever it is on you machine)</li>
</ul>
<p><img src="images/tesseract03.jpg" /></p>
<ul>
<li>Click “OK” a few times to close all windows.</li>
<li>Open up the Anaconda Prompt or Anaconda Powershell Prompt</li>
<li>Type <code>tesseract</code> and hit “Enter”. If everything is installed correctly, you should see:</li>
</ul>
<pre class="shell"><code>Usage:
  tesseract --help | --help-extra | --version
  tesseract --list-langs
  tesseract imagename outputbase [options...] [configfile...]

OCR options:
  -l LANG[+LANG]        Specify language(s) used for OCR.
NOTE: These options must occur before any configfile.

Single options:
  --help                Show this help message.
  --help-extra          Show extra help for advanced users.
  --version             Show version information.
  --list-langs          List available languages for tesseract engine.</code></pre>
</div>
<div id="for-all-systems-after-tesserract-is-installed" class="section level4">
<h4><span class="header-section-number">8.2.0.4</span> For all systems after Tesserract is installed</h4>
<p>After Tesseract is installed we need to install a couple of Python libraries:</p>
<pre class="shell"><code>python -m pip install Pillow
python -m pip install pytesseract</code></pre>
<p>Just remember that you need to use the Python command that you are using to run your scripts (for example, on Mac <code>python</code> is for Python 2.7, and <code>python3</code> is commonly for Python 3.X)</p>
<p>Alternatively, if you use Anaconda:</p>
<pre class="shell"><code>conda install -c conda-forge Pillow
conda install -c conda-forge pytesseract</code></pre>
</div>
<div id="final-test" class="section level4">
<h4><span class="header-section-number">8.2.0.5</span> Final Test</h4>
<p>In you command line tool, type <code>tesseract</code>. If everything is installed correctly, you shoudl see the following:</p>
<pre class="shell"><code>user % tesseract

Usage:
  tesseract --help | --help-extra | --version
  tesseract --list-langs
  tesseract imagename outputbase [options...] [configfile...]

OCR options:
  -l LANG[+LANG]        Specify language(s) used for OCR.
NOTE: These options must occur before any configfile.

Single options:
  --help                Show this help message.
  --help-extra          Show extra help for advanced users.
  --version             Show version information.
  --list-langs          List available languages for tesseract engine.</code></pre>
</div>
</div>
<div id="task-general-map-pseudocode" class="section level2">
<h2><span class="header-section-number">8.3</span> Task: General Map Pseudocode</h2>
<p>Like in the previous lesson, let’s start with processing a single publication (using a dictionary with the data on a single record). We want to process PDF page by page, save an image of each page, extract text from every page and save the extracted text into some format that would keep the entire text of our publication, preserving separation into pages (<em>Hint:</em> dictionary &gt; json). After we can do that, we will need to write a little bit of code that will process all our publicationa. What we want to have in the end is each and every publication in our memex processed this way. For consistency, let’s call this script <code>2_OCR.py</code></p>
</div>
<div id="code-snippets-functions" class="section level2">
<h2><span class="header-section-number">8.4</span> Code snippets &amp; functions</h2>
<div id="new-libraries" class="section level3">
<h3><span class="header-section-number">8.4.1</span> New libraries</h3>
<p>We will need the following new libraries that you will need to install, if you have not already:</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb57-1" title="1">pdf2image    <span class="co"># extracts images from PDF</span></a>
<a class="sourceLine" id="cb57-2" title="2">pytesseract  <span class="co"># interacts with Tesseract, which extracts text from images</span></a>
<a class="sourceLine" id="cb57-3" title="3">PyPDF2       <span class="co"># cleans PDFs</span></a></code></pre></div>
</div>
<div id="code-reuse" class="section level3">
<h3><span class="header-section-number">8.4.2</span> Code Reuse</h3>
<p>We have already discussed functions as a useful mechanism for code reuse; additionally, use can place often-used functions into a separate file (let’s call it <code>functions.py</code>) and import it with <code>import functions</code> in our other script. (<strong>IMPORTANT:</strong> <code>functions.py</code> <strong>must</strong> be in the same folder as you other script that imports it). For example:</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb58-1" title="1"><span class="co">#############################</span></a>
<a class="sourceLine" id="cb58-2" title="2"><span class="co"># STORING FUNCTIONS #########</span></a>
<a class="sourceLine" id="cb58-3" title="3"><span class="co">#############################</span></a>
<a class="sourceLine" id="cb58-4" title="4"></a>
<a class="sourceLine" id="cb58-5" title="5"><span class="im">import</span> os</a>
<a class="sourceLine" id="cb58-6" title="6"></a>
<a class="sourceLine" id="cb58-7" title="7"><span class="co"># generate path from bibtex code:</span></a>
<a class="sourceLine" id="cb58-8" title="8"><span class="kw">def</span> generatePublPath(pathToMemex, bibTexCode):</a>
<a class="sourceLine" id="cb58-9" title="9">    temp <span class="op">=</span> bibTexCode.lower()</a>
<a class="sourceLine" id="cb58-10" title="10">    directory <span class="op">=</span> os.path.join(pathToMemex, temp[<span class="dv">0</span>], temp[:<span class="dv">2</span>], bibTexCode)</a>
<a class="sourceLine" id="cb58-11" title="11">    <span class="cf">return</span>(directory)</a></code></pre></div>
<div class="sourceCode" id="cb59"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb59-1" title="1"><span class="co">#############################</span></a>
<a class="sourceLine" id="cb59-2" title="2"><span class="co"># REUSING FUNCTIONS #########</span></a>
<a class="sourceLine" id="cb59-3" title="3"><span class="co">#############################</span></a>
<a class="sourceLine" id="cb59-4" title="4"></a>
<a class="sourceLine" id="cb59-5" title="5"><span class="im">import</span> functions</a>
<a class="sourceLine" id="cb59-6" title="6"></a>
<a class="sourceLine" id="cb59-7" title="7">pathToMemex <span class="op">=</span> <span class="st">&quot;pathToMemex&quot;</span></a>
<a class="sourceLine" id="cb59-8" title="8">citationKey <span class="op">=</span> <span class="st">&quot;Bush_AsWeMayThink_1945&quot;</span></a>
<a class="sourceLine" id="cb59-9" title="9"></a>
<a class="sourceLine" id="cb59-10" title="10">publPath <span class="op">=</span> functions.generatePublPath(pathToMemex, citationKey)</a></code></pre></div>
<p><strong>NB:</strong> In general, you can also package your functions into a library and use it as a regular library. For more details, check Paul Vierthaler’s <a href="https://www.youtube.com/playlist?list=PL6kqrM2i6BPKxJN3610r1NzT7u235hEjM">“Studium Digitale” Series</a> (particularly Video 5).</p>
</div>
</div>
<div id="clean-temporary-copy-of-a-pdf" class="section level2">
<h2><span class="header-section-number">8.5</span> Clean Temporary Copy of a PDF</h2>
<p>Why do we need this function? You may have PDFs that you have already annotated with highlights, comments, etc. Highlights will interfere with the OCR process and will most likely be omitted from the final results. For this reason, we will want to clean all PDFs before we OCR them. In order not to delete your annotations, we will generate a temporary PDF file, which we can safely delete after processing it.</p>
<p>The functions take a path to a PDF as its argument; creates a clean copy of it and saves it with a different name, replacing the suffix <code>.pdf</code> with <code>_TEMP.pdf</code>; and then returns the path to this temporary PDF. We can easily process it and delete after completion.</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb60-1" title="1"><span class="im">import</span> PyPDF2</a>
<a class="sourceLine" id="cb60-2" title="2"></a>
<a class="sourceLine" id="cb60-3" title="3"><span class="kw">def</span> removeCommentsFromPDF(pathToPdf):</a>
<a class="sourceLine" id="cb60-4" title="4">    <span class="cf">with</span> <span class="bu">open</span>(pathToPdf, <span class="st">&#39;rb&#39;</span>) <span class="im">as</span> pdf_obj:</a>
<a class="sourceLine" id="cb60-5" title="5">        pdf <span class="op">=</span> PyPDF2.PdfFileReader(pdf_obj)</a>
<a class="sourceLine" id="cb60-6" title="6">        out <span class="op">=</span> PyPDF2.PdfFileWriter()</a>
<a class="sourceLine" id="cb60-7" title="7">        <span class="cf">for</span> page <span class="kw">in</span> pdf.pages:</a>
<a class="sourceLine" id="cb60-8" title="8">            out.addPage(page)</a>
<a class="sourceLine" id="cb60-9" title="9">            out.removeLinks()</a>
<a class="sourceLine" id="cb60-10" title="10">        tempPDF <span class="op">=</span> pathToPdf.replace(<span class="st">&quot;.pdf&quot;</span>, <span class="st">&quot;_TEMP.pdf&quot;</span>)</a>
<a class="sourceLine" id="cb60-11" title="11">        <span class="cf">with</span> <span class="bu">open</span>(tempPDF, <span class="st">&#39;wb&#39;</span>) <span class="im">as</span> f: </a>
<a class="sourceLine" id="cb60-12" title="12">            out.write(f)</a>
<a class="sourceLine" id="cb60-13" title="13">    <span class="cf">return</span>(tempPDF)</a></code></pre></div>
<div id="ocr-ing-pdf" class="section level3">
<h3><span class="header-section-number">8.5.1</span> OCR-ing PDF</h3>
<p>The following function takes three arguments: path to memex, citation key, and the language of the publication. The function processes PDFs: extracts images, OCRs them, collects results into a dictionary, saves OCR results into a JSON file.</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb61-1" title="1"><span class="im">import</span> os, json</a>
<a class="sourceLine" id="cb61-2" title="2"><span class="im">import</span> pdf2image, pytesseract</a>
<a class="sourceLine" id="cb61-3" title="3"></a>
<a class="sourceLine" id="cb61-4" title="4"><span class="kw">def</span> ocrPublication(pathToMemex, citationKey, language):</a>
<a class="sourceLine" id="cb61-5" title="5">    publPath <span class="op">=</span> functions.generatePublPath(pathToMemex, citationKey)</a>
<a class="sourceLine" id="cb61-6" title="6">    pdfFile  <span class="op">=</span> os.path.join(publPath, citationKey <span class="op">+</span> <span class="st">&quot;.pdf&quot;</span>)</a>
<a class="sourceLine" id="cb61-7" title="7">    jsonFile <span class="op">=</span> os.path.join(publPath, citationKey <span class="op">+</span> <span class="st">&quot;.json&quot;</span>)</a>
<a class="sourceLine" id="cb61-8" title="8">    saveToPath <span class="op">=</span> os.path.join(publPath, <span class="st">&quot;pages&quot;</span>)</a>
<a class="sourceLine" id="cb61-9" title="9"></a>
<a class="sourceLine" id="cb61-10" title="10">    pdfFileTemp <span class="op">=</span> removeCommentsFromPDF(pdfFile)</a>
<a class="sourceLine" id="cb61-11" title="11"></a>
<a class="sourceLine" id="cb61-12" title="12">    <span class="cf">if</span> <span class="kw">not</span> os.path.isfile(jsonFile):</a>
<a class="sourceLine" id="cb61-13" title="13">        <span class="cf">if</span> <span class="kw">not</span> os.path.exists(saveToPath):</a>
<a class="sourceLine" id="cb61-14" title="14">            os.makedirs(saveToPath)</a>
<a class="sourceLine" id="cb61-15" title="15">        </a>
<a class="sourceLine" id="cb61-16" title="16">        <span class="bu">print</span>(<span class="st">&quot;</span><span class="ch">\t</span><span class="st">&gt;&gt;&gt; OCR-ing: </span><span class="sc">%s</span><span class="st">&quot;</span> <span class="op">%</span> citationKey)</a>
<a class="sourceLine" id="cb61-17" title="17"></a>
<a class="sourceLine" id="cb61-18" title="18">        textResults <span class="op">=</span> {}</a>
<a class="sourceLine" id="cb61-19" title="19">        images <span class="op">=</span> pdf2image.convert_from_path(pdfFileTemp)</a>
<a class="sourceLine" id="cb61-20" title="20">        pageTotal <span class="op">=</span> <span class="bu">len</span>(images)</a>
<a class="sourceLine" id="cb61-21" title="21">        pageCount <span class="op">=</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb61-22" title="22">        <span class="cf">for</span> image <span class="kw">in</span> images:</a>
<a class="sourceLine" id="cb61-23" title="23">            image <span class="op">=</span> image.convert(<span class="st">&#39;1&#39;</span>)</a>
<a class="sourceLine" id="cb61-24" title="24">            finalPath <span class="op">=</span> os.path.join(saveToPath, <span class="st">&quot;</span><span class="sc">%04d</span><span class="st">.png&quot;</span> <span class="op">%</span> pageCount)</a>
<a class="sourceLine" id="cb61-25" title="25">            image.save(finalPath, optimize<span class="op">=</span><span class="va">True</span>, quality<span class="op">=</span><span class="dv">10</span>)</a>
<a class="sourceLine" id="cb61-26" title="26"></a>
<a class="sourceLine" id="cb61-27" title="27">            text <span class="op">=</span> pytesseract.image_to_string(image, lang<span class="op">=</span>language)</a>
<a class="sourceLine" id="cb61-28" title="28">            textResults[<span class="st">&quot;</span><span class="sc">%04d</span><span class="st">&quot;</span> <span class="op">%</span> pageCount] <span class="op">=</span> text</a>
<a class="sourceLine" id="cb61-29" title="29"></a>
<a class="sourceLine" id="cb61-30" title="30">            <span class="bu">print</span>(<span class="st">&quot;</span><span class="ch">\t\t</span><span class="sc">%04d</span><span class="st">/</span><span class="sc">%04d</span><span class="st"> pages&quot;</span> <span class="op">%</span> (pageCount, pageTotal))</a>
<a class="sourceLine" id="cb61-31" title="31">            pageCount <span class="op">+=</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb61-32" title="32"></a>
<a class="sourceLine" id="cb61-33" title="33">        <span class="cf">with</span> <span class="bu">open</span>(jsonFile, <span class="st">&#39;w&#39;</span>, encoding<span class="op">=</span><span class="st">&#39;utf8&#39;</span>) <span class="im">as</span> f9:</a>
<a class="sourceLine" id="cb61-34" title="34">            json.dump(textResults, f9, sort_keys<span class="op">=</span><span class="va">True</span>, indent<span class="op">=</span><span class="dv">4</span>, ensure_ascii<span class="op">=</span><span class="va">False</span>)</a>
<a class="sourceLine" id="cb61-35" title="35">    </a>
<a class="sourceLine" id="cb61-36" title="36">    <span class="cf">else</span>:</a>
<a class="sourceLine" id="cb61-37" title="37">        <span class="bu">print</span>(<span class="st">&quot;</span><span class="ch">\t</span><span class="st">&gt;&gt;&gt; </span><span class="sc">%s</span><span class="st"> has already been OCR-ed...&quot;</span> <span class="op">%</span> citationKey)</a>
<a class="sourceLine" id="cb61-38" title="38"></a>
<a class="sourceLine" id="cb61-39" title="39">    os.remove(pdfFileTemp)</a></code></pre></div>
</div>
<div id="missing-functions" class="section level3">
<h3><span class="header-section-number">8.5.2</span> Missing functions</h3>
<p>You can reuse these functions to assemble the entire process needed for this lesson. You will need to write a couple of your own though:</p>
<ul>
<li>first, you will need to solve the problem of picking the right language (see my comments below in <em>Tesseract Language Codes</em>)</li>
<li>you will need to write the final block that processes all PDFs.</li>
</ul>
</div>
</div>
<div id="one-more-note-on-ocr" class="section level2">
<h2><span class="header-section-number">8.6</span> One more note on OCR</h2>
<p>Unfortunately, OCR-ing is a rather slow process, taking 10-30 seconds per page (depending on the speed of your computer). So, you will have to run it for some time in order to process everything—the more you have the longer it will take to process all. Good news is that this operation needs to be done only once per publication. Additionally, we can use some tricks to speed up the process, which we will discuss next time.</p>
</div>
<div id="HWL08" class="section level2">
<h2><span class="header-section-number">8.7</span> Homework</h2>
<ul>
<li>the task is described above.</li>
<li>additionally, take the solution scripts from the previous lesson and annotate every line of code; submit your annotations together with the main assignment; if you have any suggestions for improvements, please share them (this will count as extra points :).</li>
<li>upload your results to your memex github repository
<ul>
<li>place annotated scripts into <code>_misc</code> subfolder</li>
</ul></li>
</ul>
</div>
<div id="HWL08S" class="section level2">
<h2><span class="header-section-number">8.8</span> Homework Solution</h2>
<p><strong>Note</strong>: all this new code is available here as well: <a href="https://github.com/maximromanov/memex_sandbox" class="uri">https://github.com/maximromanov/memex_sandbox</a></p>
<p>First, a little update: I have added a function that will load settings from our YAML file. The main goals here are twofold: first, to avoid using YAML libraries (as we discovered, they function somewhat differently and one is not compartible with the latest versions of Python); second, to add a bit of flexibility to our settings file, which now can include annotations/comments that YAML files do not exactly support.</p>
<p>Here is an example of our new settings file:</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode yaml"><code class="sourceCode yaml"><a class="sourceLine" id="cb62-1" title="1"><span class="co"># !!! DO NOT CHANGE EXISTING KEYS !!! ONLY VALUES</span></a>
<a class="sourceLine" id="cb62-2" title="2"></a>
<a class="sourceLine" id="cb62-3" title="3"><span class="co"># PATH TO MEMEX</span></a>
<a class="sourceLine" id="cb62-4" title="4"><span class="fu">path_to_memex:</span><span class="at"> ./_data/</span></a>
<a class="sourceLine" id="cb62-5" title="5"></a>
<a class="sourceLine" id="cb62-6" title="6"><span class="co"># BIBLIOGRAPHICAL FILES</span></a>
<a class="sourceLine" id="cb62-7" title="7"><span class="fu">bib_all:</span><span class="at"> ./_bib/zotero_bibliography.bib</span></a>
<a class="sourceLine" id="cb62-8" title="8"><span class="fu">bibtex_keys:</span><span class="at"> ./_bib/bibtex_keys.yml</span></a>
<a class="sourceLine" id="cb62-9" title="9"><span class="fu">language_keys:</span><span class="at"> ./_bib/bibtex_languages.yml</span></a>
<a class="sourceLine" id="cb62-10" title="10"></a>
<a class="sourceLine" id="cb62-11" title="11"><span class="co"># TEMPLATES AND CONTENT FILES FOR THE INTERFACE</span></a>
<a class="sourceLine" id="cb62-12" title="12"><span class="fu">template_page:</span><span class="at"> ./_misc/template_page.html</span></a>
<a class="sourceLine" id="cb62-13" title="13"><span class="fu">template_index:</span><span class="at"> ./_misc/template_index.html</span></a>
<a class="sourceLine" id="cb62-14" title="14"><span class="fu">content_index:</span><span class="at"> ./_misc/content_index.html</span></a>
<a class="sourceLine" id="cb62-15" title="15"></a>
<a class="sourceLine" id="cb62-16" title="16"><span class="co"># GENERATED FILES AND EXTENSIONS</span></a>
<a class="sourceLine" id="cb62-17" title="17"><span class="fu">memexDF_file:</span><span class="at"> ./_data/memex.documentFrequencies</span></a>
<a class="sourceLine" id="cb62-18" title="18"><span class="fu">tfPubl_ext:</span><span class="at"> .publTF </span><span class="co"># term frequencies per entire publication</span></a>
<a class="sourceLine" id="cb62-19" title="19"><span class="fu">tfPage_ext:</span><span class="at"> .pageTF </span><span class="co"># term frequencies per each page</span></a>
<a class="sourceLine" id="cb62-20" title="20"><span class="fu">tfIdfPubl_ext:</span><span class="at"> .publTFIDF </span><span class="co"># tfIdf frequencies per entire publication</span></a>
<a class="sourceLine" id="cb62-21" title="21"><span class="fu">tfIdfPage_ext:</span><span class="at"> .pageTFIDF </span><span class="co"># tfIdf frequencies per each page</span></a></code></pre></div>
<p>In this file you can add comments (starting with <code>#</code>); you can visually separate blocks of variables so that they are more readable. Make sure not to change the <code>keys</code> — only the values may be changed.</p>
<p>Our loading function looks as shown in the block below. Essentially, it does the following: first, it removes all non-YAML elements; second, it splits the cleaned text into units that contain key-value pairs; and, third, it splits these units into keys and values and adds them into a dictionary, which is then “returned”.</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb63-1" title="1"><span class="kw">def</span> loadYmlSettings(ymlFile):</a>
<a class="sourceLine" id="cb63-2" title="2">    <span class="cf">with</span> <span class="bu">open</span>(ymlFile, <span class="st">&quot;r&quot;</span>, encoding<span class="op">=</span><span class="st">&quot;utf8&quot;</span>) <span class="im">as</span> f1:</a>
<a class="sourceLine" id="cb63-3" title="3">        data <span class="op">=</span> f1.read()</a>
<a class="sourceLine" id="cb63-4" title="4">        data <span class="op">=</span> re.sub(<span class="vs">r&quot;#.*&quot;</span>, <span class="st">&quot;&quot;</span>, data) <span class="co"># remove comments</span></a>
<a class="sourceLine" id="cb63-5" title="5">        data <span class="op">=</span> re.sub(<span class="vs">r&quot;\n+&quot;</span>, <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>, data) <span class="co"># remove extra linebreaks used for readability</span></a>
<a class="sourceLine" id="cb63-6" title="6">        data <span class="op">=</span> re.split(<span class="vs">r&quot;\n(?=\w)&quot;</span>, data) <span class="co"># splitting</span></a>
<a class="sourceLine" id="cb63-7" title="7">        dic <span class="op">=</span> {}</a>
<a class="sourceLine" id="cb63-8" title="8">        <span class="cf">for</span> d <span class="kw">in</span> data:</a>
<a class="sourceLine" id="cb63-9" title="9">            <span class="cf">if</span> <span class="st">&quot;:&quot;</span> <span class="kw">in</span> d:</a>
<a class="sourceLine" id="cb63-10" title="10">                d <span class="op">=</span> re.sub(<span class="vs">r&quot;\s+&quot;</span>, <span class="st">&quot; &quot;</span>, d.strip())</a>
<a class="sourceLine" id="cb63-11" title="11">                d <span class="op">=</span> re.split(<span class="vs">r&quot;^([^:]+) *:&quot;</span>, d)[<span class="dv">1</span>:]</a>
<a class="sourceLine" id="cb63-12" title="12">                key <span class="op">=</span> d[<span class="dv">0</span>].strip()</a>
<a class="sourceLine" id="cb63-13" title="13">                value <span class="op">=</span> d[<span class="dv">1</span>].strip()</a>
<a class="sourceLine" id="cb63-14" title="14">                dic[key] <span class="op">=</span> value</a>
<a class="sourceLine" id="cb63-15" title="15">    <span class="cf">return</span>(dic)</a></code></pre></div>
<p>The main OCR-ing Script:</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb64-1" title="1"><span class="co"># NEW LIBRARIES</span></a>
<a class="sourceLine" id="cb64-2" title="2"><span class="im">import</span> pdf2image</a>
<a class="sourceLine" id="cb64-3" title="3"><span class="im">import</span> pytesseract</a>
<a class="sourceLine" id="cb64-4" title="4"></a>
<a class="sourceLine" id="cb64-5" title="5"><span class="im">import</span> os, yaml, json, random</a>
<a class="sourceLine" id="cb64-6" title="6"></a>
<a class="sourceLine" id="cb64-7" title="7"><span class="im">import</span> functions</a>
<a class="sourceLine" id="cb64-8" title="8"></a>
<a class="sourceLine" id="cb64-9" title="9"><span class="co">###########################################################</span></a>
<a class="sourceLine" id="cb64-10" title="10"><span class="co"># VARIABLES ###############################################</span></a>
<a class="sourceLine" id="cb64-11" title="11"><span class="co">###########################################################</span></a>
<a class="sourceLine" id="cb64-12" title="12"></a>
<a class="sourceLine" id="cb64-13" title="13">settingsFile <span class="op">=</span> <span class="st">&quot;settings.yml&quot;</span></a>
<a class="sourceLine" id="cb64-14" title="14">settings <span class="op">=</span> yaml.load(<span class="bu">open</span>(settingsFile))</a>
<a class="sourceLine" id="cb64-15" title="15"></a>
<a class="sourceLine" id="cb64-16" title="16">memexPath <span class="op">=</span> settings[<span class="st">&quot;path_to_memex&quot;</span>]</a>
<a class="sourceLine" id="cb64-17" title="17">langKeys <span class="op">=</span> yaml.load(<span class="bu">open</span>(settings[<span class="st">&quot;language_keys&quot;</span>]))</a>
<a class="sourceLine" id="cb64-18" title="18"></a>
<a class="sourceLine" id="cb64-19" title="19"><span class="co">###########################################################</span></a>
<a class="sourceLine" id="cb64-20" title="20"><span class="co"># TRICKY FUNCTIONS ########################################</span></a>
<a class="sourceLine" id="cb64-21" title="21"><span class="co">###########################################################</span></a>
<a class="sourceLine" id="cb64-22" title="22"></a>
<a class="sourceLine" id="cb64-23" title="23"><span class="kw">def</span> ocrPublication(pathToMemex, citationKey, language):</a>
<a class="sourceLine" id="cb64-24" title="24">    publPath <span class="op">=</span> functions.generatePublPath(pathToMemex, citationKey)</a>
<a class="sourceLine" id="cb64-25" title="25">    pdfFile  <span class="op">=</span> os.path.join(publPath, citationKey <span class="op">+</span> <span class="st">&quot;.pdf&quot;</span>)</a>
<a class="sourceLine" id="cb64-26" title="26">    jsonFile <span class="op">=</span> os.path.join(publPath, citationKey <span class="op">+</span> <span class="st">&quot;.json&quot;</span>)</a>
<a class="sourceLine" id="cb64-27" title="27">    saveToPath <span class="op">=</span> os.path.join(publPath, <span class="st">&quot;pages&quot;</span>)</a>
<a class="sourceLine" id="cb64-28" title="28"></a>
<a class="sourceLine" id="cb64-29" title="29">    <span class="cf">if</span> <span class="kw">not</span> os.path.isfile(jsonFile):</a>
<a class="sourceLine" id="cb64-30" title="30">        <span class="cf">if</span> <span class="kw">not</span> os.path.exists(saveToPath):</a>
<a class="sourceLine" id="cb64-31" title="31">            os.makedirs(saveToPath)</a>
<a class="sourceLine" id="cb64-32" title="32">        </a>
<a class="sourceLine" id="cb64-33" title="33">        <span class="bu">print</span>(<span class="st">&quot;</span><span class="ch">\t</span><span class="st">&gt;&gt;&gt; OCR-ing: </span><span class="sc">%s</span><span class="st">&quot;</span> <span class="op">%</span> citationKey)</a>
<a class="sourceLine" id="cb64-34" title="34"></a>
<a class="sourceLine" id="cb64-35" title="35">        textResults <span class="op">=</span> {}</a>
<a class="sourceLine" id="cb64-36" title="36">        images <span class="op">=</span> pdf2image.convert_from_path(pdfFile)</a>
<a class="sourceLine" id="cb64-37" title="37">        pageTotal <span class="op">=</span> <span class="bu">len</span>(images)</a>
<a class="sourceLine" id="cb64-38" title="38">        pageCount <span class="op">=</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb64-39" title="39">        <span class="cf">for</span> image <span class="kw">in</span> images:</a>
<a class="sourceLine" id="cb64-40" title="40">            text <span class="op">=</span> pytesseract.image_to_string(image, lang<span class="op">=</span>language)</a>
<a class="sourceLine" id="cb64-41" title="41">            textResults[<span class="st">&quot;</span><span class="sc">%04d</span><span class="st">&quot;</span> <span class="op">%</span> pageCount] <span class="op">=</span> text</a>
<a class="sourceLine" id="cb64-42" title="42"></a>
<a class="sourceLine" id="cb64-43" title="43">            image <span class="op">=</span> image.convert(<span class="st">&#39;1&#39;</span>) <span class="co"># binarizes image, reducing its size</span></a>
<a class="sourceLine" id="cb64-44" title="44">            finalPath <span class="op">=</span> os.path.join(saveToPath, <span class="st">&quot;</span><span class="sc">%04d</span><span class="st">.png&quot;</span> <span class="op">%</span> pageCount)</a>
<a class="sourceLine" id="cb64-45" title="45">            image.save(finalPath, optimize<span class="op">=</span><span class="va">True</span>, quality<span class="op">=</span><span class="dv">10</span>)</a>
<a class="sourceLine" id="cb64-46" title="46"></a>
<a class="sourceLine" id="cb64-47" title="47">            <span class="bu">print</span>(<span class="st">&quot;</span><span class="ch">\t\t</span><span class="sc">%04d</span><span class="st">/</span><span class="sc">%04d</span><span class="st"> pages&quot;</span> <span class="op">%</span> (pageCount, pageTotal))</a>
<a class="sourceLine" id="cb64-48" title="48">            pageCount <span class="op">+=</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb64-49" title="49"></a>
<a class="sourceLine" id="cb64-50" title="50">        <span class="cf">with</span> <span class="bu">open</span>(jsonFile, <span class="st">&#39;w&#39;</span>, encoding<span class="op">=</span><span class="st">&#39;utf8&#39;</span>) <span class="im">as</span> f9:</a>
<a class="sourceLine" id="cb64-51" title="51">            json.dump(textResults, f9, sort_keys<span class="op">=</span><span class="va">True</span>, indent<span class="op">=</span><span class="dv">4</span>, ensure_ascii<span class="op">=</span><span class="va">False</span>)</a>
<a class="sourceLine" id="cb64-52" title="52">    </a>
<a class="sourceLine" id="cb64-53" title="53">    <span class="cf">else</span>:</a>
<a class="sourceLine" id="cb64-54" title="54">        <span class="bu">print</span>(<span class="st">&quot;</span><span class="ch">\t</span><span class="st">&gt;&gt;&gt; </span><span class="sc">%s</span><span class="st"> has already been OCR-ed...&quot;</span> <span class="op">%</span> citationKey)</a>
<a class="sourceLine" id="cb64-55" title="55"></a>
<a class="sourceLine" id="cb64-56" title="56"><span class="kw">def</span> identifyLanguage(bibRecDict, fallBackLanguage):</a>
<a class="sourceLine" id="cb64-57" title="57">    <span class="cf">if</span> <span class="st">&quot;langid&quot;</span> <span class="kw">in</span> bibRecDict:</a>
<a class="sourceLine" id="cb64-58" title="58">        <span class="cf">try</span>:</a>
<a class="sourceLine" id="cb64-59" title="59">            language <span class="op">=</span> langKeys[bibRecDict[<span class="st">&quot;langid&quot;</span>]]</a>
<a class="sourceLine" id="cb64-60" title="60">            message <span class="op">=</span> <span class="st">&quot;</span><span class="ch">\t</span><span class="st">&gt;&gt; Language has been successfuly identified: </span><span class="sc">%s</span><span class="st">&quot;</span> <span class="op">%</span> language</a>
<a class="sourceLine" id="cb64-61" title="61">        <span class="cf">except</span>:</a>
<a class="sourceLine" id="cb64-62" title="62">            message <span class="op">=</span> <span class="st">&quot;</span><span class="ch">\t</span><span class="st">&gt;&gt; Language ID `</span><span class="sc">%s</span><span class="st">` cannot be understood by Tesseract; fix it and retry</span><span class="ch">\n</span><span class="st">&quot;</span> <span class="op">%</span> bibRecDict[<span class="st">&quot;langid&quot;</span>]</a>
<a class="sourceLine" id="cb64-63" title="63">            message <span class="op">+=</span> <span class="st">&quot;</span><span class="ch">\t</span><span class="st">&gt;&gt; For now, trying `</span><span class="sc">%s</span><span class="st">`...&quot;</span> <span class="op">%</span> fallBackLanguage</a>
<a class="sourceLine" id="cb64-64" title="64">            language <span class="op">=</span> fallBackLanguage</a>
<a class="sourceLine" id="cb64-65" title="65">    <span class="cf">else</span>:</a>
<a class="sourceLine" id="cb64-66" title="66">        message <span class="op">=</span> <span class="st">&quot;</span><span class="ch">\t</span><span class="st">&gt;&gt; No data on the language of the publication&quot;</span></a>
<a class="sourceLine" id="cb64-67" title="67">        message <span class="op">+=</span> <span class="st">&quot;</span><span class="ch">\t</span><span class="st">&gt;&gt; For now, trying `</span><span class="sc">%s</span><span class="st">`...&quot;</span> <span class="op">%</span> fallBackLanguage</a>
<a class="sourceLine" id="cb64-68" title="68">        language <span class="op">=</span> fallBackLanguage</a>
<a class="sourceLine" id="cb64-69" title="69">    <span class="bu">print</span>(message)</a>
<a class="sourceLine" id="cb64-70" title="70">    <span class="cf">return</span>(language)</a>
<a class="sourceLine" id="cb64-71" title="71"></a>
<a class="sourceLine" id="cb64-72" title="72"></a>
<a class="sourceLine" id="cb64-73" title="73"><span class="co">###########################################################</span></a>
<a class="sourceLine" id="cb64-74" title="74"><span class="co"># PROCESS ALL RECORDS: APPROACH 2 #########################</span></a>
<a class="sourceLine" id="cb64-75" title="75"><span class="co">###########################################################</span></a>
<a class="sourceLine" id="cb64-76" title="76"></a>
<a class="sourceLine" id="cb64-77" title="77"><span class="co"># Why this way? Our computers are now quite powerful; they</span></a>
<a class="sourceLine" id="cb64-78" title="78"><span class="co"># often have multiple cores and we can take advantage of this;</span></a>
<a class="sourceLine" id="cb64-79" title="79"><span class="co"># if we process our data in the manner coded below --- we shuffle</span></a>
<a class="sourceLine" id="cb64-80" title="80"><span class="co"># our publications and process them in random order --- we can</span></a>
<a class="sourceLine" id="cb64-81" title="81"><span class="co"># run multiple instances fo the same script and data will</span></a>
<a class="sourceLine" id="cb64-82" title="82"><span class="co"># be produced in parallel. You can run as many instances as</span></a>
<a class="sourceLine" id="cb64-83" title="83"><span class="co"># your machine allows (you need to check how many cores</span></a>
<a class="sourceLine" id="cb64-84" title="84"><span class="co"># your machine has). Even running two scripts will cut</span></a>
<a class="sourceLine" id="cb64-85" title="85"><span class="co"># processing time roughly in half.</span></a>
<a class="sourceLine" id="cb64-86" title="86"></a>
<a class="sourceLine" id="cb64-87" title="87"><span class="kw">def</span> processAllRecords(bibData):</a>
<a class="sourceLine" id="cb64-88" title="88">    keys <span class="op">=</span> <span class="bu">list</span>(bibData.keys())</a>
<a class="sourceLine" id="cb64-89" title="89">    random.shuffle(keys)</a>
<a class="sourceLine" id="cb64-90" title="90"></a>
<a class="sourceLine" id="cb64-91" title="91">    <span class="cf">for</span> key <span class="kw">in</span> keys:</a>
<a class="sourceLine" id="cb64-92" title="92">        bibRecord <span class="op">=</span> bibData[key]</a>
<a class="sourceLine" id="cb64-93" title="93"></a>
<a class="sourceLine" id="cb64-94" title="94">        functions.processBibRecord(memexPath, bibRecord)</a>
<a class="sourceLine" id="cb64-95" title="95"></a>
<a class="sourceLine" id="cb64-96" title="96">        language <span class="op">=</span> identifyLanguage(bibRecord, <span class="st">&quot;eng&quot;</span>)</a>
<a class="sourceLine" id="cb64-97" title="97">        ocrPublication(memexPath, bibRecord[<span class="st">&quot;rCite&quot;</span>], language)</a>
<a class="sourceLine" id="cb64-98" title="98"></a>
<a class="sourceLine" id="cb64-99" title="99"></a>
<a class="sourceLine" id="cb64-100" title="100">bibData <span class="op">=</span> functions.loadBib(settings[<span class="st">&quot;bib_all&quot;</span>])</a>
<a class="sourceLine" id="cb64-101" title="101">processAllRecords(bibData)</a></code></pre></div>
</div>
<div id="tesseract-language-codes" class="section level2">
<h2><span class="header-section-number">8.9</span> Tesseract Language Codes</h2>
<p>As you can see below there are quite a few languages. You may need only those languages that you can read. The question is how to determine the language of a publication? Usually, when you add data to Zotero, there will be a field that states the language. There are two problems, however. First, the language field is often empty. Second, the same language can be indicated in a variety of ways (for example, <code>en</code>, <code>eng</code>, <code>English</code>, <code>Englisch</code>, etc.). Tesseract uses triliteral <a href="https://www.loc.gov/standards/iso639-2/php/code_list.php">ISO 639-2</a> standard for language codes (<code>eng</code> for English). How to resolve this issue? There are three things to consider:</p>
<ol style="list-style-type: decimal">
<li>you can curate you Zotero data, manually fixing language codes;</li>
<li>you can create a dictionary (yaml file) that will have most common spellings of languages that occure in your data (you can build a frequency list in order to identify them; then convert that data into YAML format with regular expressions; then manually fix all irregularities);</li>
<li>you can write a function that checks if the language code in your data corresponds to any code in Tesseract: if true, the function will return it; if not, it defaults to the most common language in your library.</li>
</ol>
<p>In general, the most optimal approach will have elements of all three.</p>
<pre class="shell"><code>user % tesseract --list-langs

List of available languages (162):
afr
amh
ara
asm
aze
aze_cyrl
bel
ben
bod
bos
bre
bul
cat
ceb
ces
chi_sim
chi_sim_vert
chi_tra
chi_tra_vert
chr
cos
cym
dan
deu
div
dzo
ell
eng
enm
epo
est
eus
fao
fas
fil
fin
fra
frk
frm
fry
gla
gle
glg
grc
guj
hat
heb
hin
hrv
hun
hye
iku
ind
isl
ita
ita_old
jav
jpn
jpn_vert
kan
kat
kat_old
kaz
khm
kir
kmr
kor
kor_vert
lao
lat
lav
lit
ltz
mal
mar
mkd
mlt
mon
mri
msa
mya
nep
nld
nor
oci
ori
osd
pan
pol
por
pus
que
ron
rus
san
script/Arabic
script/Armenian
script/Bengali
script/Canadian_Aboriginal
script/Cherokee
script/Cyrillic
script/Devanagari
script/Ethiopic
script/Fraktur
script/Georgian
script/Greek
script/Gujarati
script/Gurmukhi
script/HanS
script/HanS_vert
script/HanT
script/HanT_vert
script/Hangul
script/Hangul_vert
script/Hebrew
script/Japanese
script/Japanese_vert
script/Kannada
script/Khmer
script/Lao
script/Latin
script/Malayalam
script/Myanmar
script/Oriya
script/Sinhala
script/Syriac
script/Tamil
script/Telugu
script/Thaana
script/Thai
script/Tibetan
script/Vietnamese
sin
slk
slv
snd
snum
spa
spa_old
sqi
srp
srp_latn
sun
swa
swe
syr
tam
tat
tel
tgk
tha
tir
ton
tur
uig
ukr
urd
uzb
uzb_cyrl
vie
yid
yor
</code></pre>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="lesson-07.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="lesson-09.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "github"]
},
"fontsettings": {
"theme": "white",
"family": "serif",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"toolbar": {
"position": "fixed"
},
"search": true,
"info": true
});
});
</script>

</body>

</html>
