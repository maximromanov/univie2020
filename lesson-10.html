<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>10 Lesson 10 | 070172-1 UE Methodological course - Introduction to DH: Tools &amp; Techniques (2020W) Memex Edition</title>
  <meta name="description" content="This is a collection of relevant materials for the class ‘070172-1 UE Methodological course - Introduction to DH: Tools &amp; Techniques (2020W) Memex Edition’, offered at the University of Vienna and taught by Maxim G. Romanov" />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="10 Lesson 10 | 070172-1 UE Methodological course - Introduction to DH: Tools &amp; Techniques (2020W) Memex Edition" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://maximromanov.github.io/univie2020/" />
  
  <meta property="og:description" content="This is a collection of relevant materials for the class ‘070172-1 UE Methodological course - Introduction to DH: Tools &amp; Techniques (2020W) Memex Edition’, offered at the University of Vienna and taught by Maxim G. Romanov" />
  <meta name="github-repo" content="maximromanov/univie2020" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="10 Lesson 10 | 070172-1 UE Methodological course - Introduction to DH: Tools &amp; Techniques (2020W) Memex Edition" />
  
  <meta name="twitter:description" content="This is a collection of relevant materials for the class ‘070172-1 UE Methodological course - Introduction to DH: Tools &amp; Techniques (2020W) Memex Edition’, offered at the University of Vienna and taught by Maxim G. Romanov" />
  

<meta name="author" content="Maxim G. Romanov" />


<meta name="date" content="2021-01-06" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <link rel="apple-touch-icon-precomposed" sizes="120x120" href="touch-icon.png" />
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<link rel="prev" href="lesson-09.html"/>
<link rel="next" href="syllabus.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<script src="libs/viz-1.8.2/viz.js"></script>
<link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
<script src="libs/grViz-binding-1.0.6.1/grViz.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">070172 UE Methodological course - Introduction to DH: Tools & Techniques (2020W), <i>Memex Edition</i></a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preliminaries</a></li>
<li class="chapter" data-level="" data-path="memex-and-zettelkasten.html"><a href="memex-and-zettelkasten.html"><i class="fa fa-check"></i>Memex and Zettelkasten</a><ul>
<li class="chapter" data-level="" data-path="memex-and-zettelkasten.html"><a href="memex-and-zettelkasten.html#on-memex"><i class="fa fa-check"></i>On Memex</a></li>
<li class="chapter" data-level="" data-path="memex-and-zettelkasten.html"><a href="memex-and-zettelkasten.html#on-zettelkasten"><i class="fa fa-check"></i>On Zettelkasten</a><ul>
<li><a href="memex-and-zettelkasten.html#niklas-luhmann-on-his-zettelkasten">Niklas Luhmann on his <em>Zettelkasten</em></a></li>
<li><a href="memex-and-zettelkasten.html#others-on-luhmanns-zettelkasten">Others on Luhmann’s <em>Zettelkasten</em></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="work-plan.html"><a href="work-plan.html"><i class="fa fa-check"></i>Work Plan</a><ul>
<li class="chapter" data-level="" data-path="work-plan.html"><a href="work-plan.html#memex-building-cycle"><i class="fa fa-check"></i>Memex-Building Cycle</a></li>
<li class="chapter" data-level="" data-path="work-plan.html"><a href="work-plan.html#research-cycle"><i class="fa fa-check"></i>Research Cycle</a><ul>
<li class="chapter" data-level="" data-path="work-plan.html"><a href="work-plan.html#building-trails"><i class="fa fa-check"></i>Building Trails</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="1" data-path="lesson-01.html"><a href="lesson-01.html"><i class="fa fa-check"></i><b>1</b> Lesson 01</a><ul>
<li class="chapter" data-level="1.1" data-path="lesson-01.html"><a href="lesson-01.html#bibliography-managers"><i class="fa fa-check"></i><b>1.1</b> Bibliography Managers</a></li>
<li class="chapter" data-level="1.2" data-path="lesson-01.html"><a href="lesson-01.html#zotero"><i class="fa fa-check"></i><b>1.2</b> Zotero</a><ul>
<li class="chapter" data-level="1.2.1" data-path="lesson-01.html"><a href="lesson-01.html#getting-started"><i class="fa fa-check"></i><b>1.2.1</b> Getting Started</a></li>
<li class="chapter" data-level="1.2.2" data-path="lesson-01.html"><a href="lesson-01.html#main-functionality"><i class="fa fa-check"></i><b>1.2.2</b> Main Functionality</a></li>
<li class="chapter" data-level="1.2.3" data-path="lesson-01.html"><a href="lesson-01.html#additional-functionality-plug-ins"><i class="fa fa-check"></i><b>1.2.3</b> Additional Functionality: Plug-Ins</a></li>
<li class="chapter" data-level="1.2.4" data-path="lesson-01.html"><a href="lesson-01.html#zotfile"><i class="fa fa-check"></i><b>1.2.4</b> Zotfile</a></li>
<li class="chapter" data-level="1.2.5" data-path="lesson-01.html"><a href="lesson-01.html#better-bibtex-for-zotero"><i class="fa fa-check"></i><b>1.2.5</b> Better BibTeX for Zotero</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="lesson-01.html"><a href="lesson-01.html#HWL01"><i class="fa fa-check"></i><b>1.3</b> Homework</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="lesson-02.html"><a href="lesson-02.html"><i class="fa fa-check"></i><b>2</b> Lesson 02</a><ul>
<li class="chapter" data-level="2.1" data-path="lesson-02.html"><a href="lesson-02.html#command-line"><i class="fa fa-check"></i><b>2.1</b> Command Line</a><ul>
<li class="chapter" data-level="2.1.1" data-path="lesson-02.html"><a href="lesson-02.html#the-filesystem"><i class="fa fa-check"></i><b>2.1.1</b> The filesystem</a></li>
<li class="chapter" data-level="2.1.2" data-path="lesson-02.html"><a href="lesson-02.html#getting-started-with-the-command-line"><i class="fa fa-check"></i><b>2.1.2</b> Getting started with the command line</a></li>
<li class="chapter" data-level="2.1.3" data-path="lesson-02.html"><a href="lesson-02.html#components-of-the-command-line"><i class="fa fa-check"></i><b>2.1.3</b> Components of the command line</a></li>
<li class="chapter" data-level="2.1.4" data-path="lesson-02.html"><a href="lesson-02.html#file-paths-and-path-notations"><i class="fa fa-check"></i><b>2.1.4</b> File paths and path notations</a></li>
<li class="chapter" data-level="2.1.5" data-path="lesson-02.html"><a href="lesson-02.html#command-line-arguments"><i class="fa fa-check"></i><b>2.1.5</b> Command line arguments</a></li>
<li class="chapter" data-level="2.1.6" data-path="lesson-02.html"><a href="lesson-02.html#more-commands"><i class="fa fa-check"></i><b>2.1.6</b> More commands</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="lesson-02.html"><a href="lesson-02.html#HWL02"><i class="fa fa-check"></i><b>2.2</b> Homework</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="lesson-03.html"><a href="lesson-03.html"><i class="fa fa-check"></i><b>3</b> Lesson 03</a><ul>
<li class="chapter" data-level="3.1" data-path="lesson-03.html"><a href="lesson-03.html#version-control-and-collaboration"><i class="fa fa-check"></i><b>3.1</b> Version Control and Collaboration</a></li>
<li class="chapter" data-level="3.2" data-path="lesson-03.html"><a href="lesson-03.html#setting-up-git"><i class="fa fa-check"></i><b>3.2</b> Setting-up <code>git</code></a></li>
<li class="chapter" data-level="3.3" data-path="lesson-03.html"><a href="lesson-03.html#general-git-workflow"><i class="fa fa-check"></i><b>3.3</b> General <code>git</code> workflow</a></li>
<li class="chapter" data-level="3.4" data-path="lesson-03.html"><a href="lesson-03.html#main-git-commands"><i class="fa fa-check"></i><b>3.4</b> Main <code>git</code> Commands</a></li>
<li class="chapter" data-level="3.5" data-path="lesson-03.html"><a href="lesson-03.html#some-useful-command-line-commands-to-remember"><i class="fa fa-check"></i><b>3.5</b> Some useful command line commands to remember</a></li>
<li class="chapter" data-level="3.6" data-path="lesson-03.html"><a href="lesson-03.html#practice"><i class="fa fa-check"></i><b>3.6</b> Practice</a></li>
<li class="chapter" data-level="3.7" data-path="lesson-03.html"><a href="lesson-03.html#HWL03"><i class="fa fa-check"></i><b>3.7</b> Homework</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="lesson-04.html"><a href="lesson-04.html"><i class="fa fa-check"></i><b>4</b> Lesson 04</a><ul>
<li class="chapter" data-level="4.1" data-path="lesson-04.html"><a href="lesson-04.html#sustainable-academic-writing-with-markdown-pandoc-and-the-tex-family"><i class="fa fa-check"></i><b>4.1</b> Sustainable Academic Writing with <code>markdown</code>, <code>pandoc</code>, and the <code>*TeX</code> family</a></li>
<li class="chapter" data-level="4.2" data-path="lesson-04.html"><a href="lesson-04.html#class-notes"><i class="fa fa-check"></i><b>4.2</b> Class Notes</a></li>
<li class="chapter" data-level="4.3" data-path="lesson-04.html"><a href="lesson-04.html#pandoc-commands"><i class="fa fa-check"></i><b>4.3</b> <code>pandoc</code> <em>Commands</em></a></li>
<li class="chapter" data-level="4.4" data-path="lesson-04.html"><a href="lesson-04.html#writing-with-markdown-in-atom"><i class="fa fa-check"></i><b>4.4</b> Writing with markdown in Atom</a></li>
<li class="chapter" data-level="4.5" data-path="lesson-04.html"><a href="lesson-04.html#reference-materials"><i class="fa fa-check"></i><b>4.5</b> Reference Materials:</a></li>
<li class="chapter" data-level="4.6" data-path="lesson-04.html"><a href="lesson-04.html#HWL04"><i class="fa fa-check"></i><b>4.6</b> Homework</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="lesson-05.html"><a href="lesson-05.html"><i class="fa fa-check"></i><b>5</b> Lesson 05</a><ul>
<li class="chapter" data-level="5.1" data-path="lesson-05.html"><a href="lesson-05.html#constructing-robust-searches"><i class="fa fa-check"></i><b>5.1</b> Constructing Robust Searches</a></li>
<li class="chapter" data-level="5.2" data-path="lesson-05.html"><a href="lesson-05.html#regular-expressions"><i class="fa fa-check"></i><b>5.2</b> <code>regular expressions</code></a><ul>
<li class="chapter" data-level="5.2.1" data-path="lesson-05.html"><a href="lesson-05.html#what-are-regular-expressions"><i class="fa fa-check"></i><b>5.2.1</b> What are <code>regular expressions</code>?**</a></li>
<li class="chapter" data-level="5.2.2" data-path="lesson-05.html"><a href="lesson-05.html#what-would-we-use-regular-expressions-for"><i class="fa fa-check"></i><b>5.2.2</b> What would we use <code>regular Expressions</code> for?</a></li>
<li class="chapter" data-level="5.2.3" data-path="lesson-05.html"><a href="lesson-05.html#the-basics"><i class="fa fa-check"></i><b>5.2.3</b> The Basics</a></li>
<li class="chapter" data-level="5.2.4" data-path="lesson-05.html"><a href="lesson-05.html#characters-special-characters"><i class="fa fa-check"></i><b>5.2.4</b> Characters <em>&amp;</em> Special Characters</a></li>
<li class="chapter" data-level="5.2.5" data-path="lesson-05.html"><a href="lesson-05.html#character-classes"><i class="fa fa-check"></i><b>5.2.5</b> Character Classes: <code>[]</code></a></li>
<li class="chapter" data-level="5.2.6" data-path="lesson-05.html"><a href="lesson-05.html#ranges-within-classes"><i class="fa fa-check"></i><b>5.2.6</b> Ranges (within classes)</a></li>
<li class="chapter" data-level="5.2.7" data-path="lesson-05.html"><a href="lesson-05.html#repeaters"><i class="fa fa-check"></i><b>5.2.7</b> Repeaters</a></li>
<li class="chapter" data-level="5.2.8" data-path="lesson-05.html"><a href="lesson-05.html#lab-intro-in-the-practicum-file."><i class="fa fa-check"></i><b>5.2.8</b> Lab: <em>Intro</em> (in the <em>practicum file</em>).</a></li>
<li class="chapter" data-level="5.2.9" data-path="lesson-05.html"><a href="lesson-05.html#anchoring"><i class="fa fa-check"></i><b>5.2.9</b> Anchoring</a></li>
<li class="chapter" data-level="5.2.10" data-path="lesson-05.html"><a href="lesson-05.html#alternation-pipe"><i class="fa fa-check"></i><b>5.2.10</b> Alternation: “|” (<em>pipe</em>)</a></li>
<li class="chapter" data-level="5.2.11" data-path="lesson-05.html"><a href="lesson-05.html#grouping"><i class="fa fa-check"></i><b>5.2.11</b> Grouping</a></li>
<li class="chapter" data-level="5.2.12" data-path="lesson-05.html"><a href="lesson-05.html#lab-part-i-in-the-practicum-file."><i class="fa fa-check"></i><b>5.2.12</b> Lab: Part I (in the <em>practicum file</em>).</a></li>
<li class="chapter" data-level="5.2.13" data-path="lesson-05.html"><a href="lesson-05.html#replacement"><i class="fa fa-check"></i><b>5.2.13</b> Replacement</a></li>
<li class="chapter" data-level="5.2.14" data-path="lesson-05.html"><a href="lesson-05.html#capture"><i class="fa fa-check"></i><b>5.2.14</b> Capture</a></li>
<li class="chapter" data-level="5.2.15" data-path="lesson-05.html"><a href="lesson-05.html#capture-reformat"><i class="fa fa-check"></i><b>5.2.15</b> Capture <em>&amp;</em> Reformat</a></li>
<li class="chapter" data-level="5.2.16" data-path="lesson-05.html"><a href="lesson-05.html#lab-part-ii-in-the-practicum-file."><i class="fa fa-check"></i><b>5.2.16</b> Lab: Part II (in the <em>practicum file</em>).</a></li>
<li class="chapter" data-level="5.2.17" data-path="lesson-05.html"><a href="lesson-05.html#to-keep-in-mind"><i class="fa fa-check"></i><b>5.2.17</b> <em>To keep in mind</em></a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="lesson-05.html"><a href="lesson-05.html#class-materials"><i class="fa fa-check"></i><b>5.3</b> Class materials</a></li>
<li class="chapter" data-level="5.4" data-path="lesson-05.html"><a href="lesson-05.html#digital-materials"><i class="fa fa-check"></i><b>5.4</b> Digital materials</a></li>
<li class="chapter" data-level="5.5" data-path="lesson-04.html"><a href="lesson-04.html#reference-materials"><i class="fa fa-check"></i><b>5.5</b> Reference Materials</a></li>
<li class="chapter" data-level="5.6" data-path="lesson-05.html"><a href="lesson-05.html#HWL05"><i class="fa fa-check"></i><b>5.6</b> Homework</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="lesson-06.html"><a href="lesson-06.html"><i class="fa fa-check"></i><b>6</b> Lesson 06</a><ul>
<li class="chapter" data-level="6.1" data-path="lesson-06.html"><a href="lesson-06.html#understanding-structured-data"><i class="fa fa-check"></i><b>6.1</b> Understanding Structured Data</a><ul>
<li class="chapter" data-level="6.1.1" data-path="lesson-06.html"><a href="lesson-06.html#xml-extensible-markup-language"><i class="fa fa-check"></i><b>6.1.1</b> XML (<em>Extensible Markup Language</em>)</a></li>
<li class="chapter" data-level="6.1.2" data-path="lesson-06.html"><a href="lesson-06.html#csvtsv-comma-separated-values-tab-separated-values"><i class="fa fa-check"></i><b>6.1.2</b> CSV/TSV (<em>Comma-Separated Values</em>/ <em>Tab-Separated Values</em>)</a></li>
<li class="chapter" data-level="6.1.3" data-path="lesson-06.html"><a href="lesson-06.html#json-javascript-object-notation"><i class="fa fa-check"></i><b>6.1.3</b> JSON (<em>JavaScript Object Notation</em>)</a></li>
<li class="chapter" data-level="6.1.4" data-path="lesson-06.html"><a href="lesson-06.html#yml-or-yaml-yet-another-markup-language-yaml-aint-markup-language"><i class="fa fa-check"></i><b>6.1.4</b> YML or YAML (<em>Yet Another Markup Language</em> &gt; <em>YAML Ain’t Markup Language</em>)</a></li>
<li class="chapter" data-level="6.1.5" data-path="lesson-06.html"><a href="lesson-06.html#bibtex-most-common-bibliographic-format"><i class="fa fa-check"></i><b>6.1.5</b> <code>BibTeX</code>: <em>most common bibliographic format</em></a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="lesson-06.html"><a href="lesson-06.html#larger-examples"><i class="fa fa-check"></i><b>6.2</b> Larger Examples</a><ul>
<li class="chapter" data-level="6.2.1" data-path="lesson-06.html"><a href="lesson-06.html#csv-tsv"><i class="fa fa-check"></i><b>6.2.1</b> <code>CSV</code> / <code>TSV</code></a></li>
<li class="chapter" data-level="6.2.2" data-path="lesson-06.html"><a href="lesson-06.html#json"><i class="fa fa-check"></i><b>6.2.2</b> <code>JSON</code></a></li>
<li class="chapter" data-level="6.2.3" data-path="lesson-06.html"><a href="lesson-06.html#ymlyaml"><i class="fa fa-check"></i><b>6.2.3</b> <code>YML</code>/<code>YAML</code></a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="lesson-06.html"><a href="lesson-06.html#in-class-practice"><i class="fa fa-check"></i><b>6.3</b> In-Class Practice</a></li>
<li class="chapter" data-level="6.4" data-path="lesson-06.html"><a href="lesson-06.html#HWL06"><i class="fa fa-check"></i><b>6.4</b> Homework</a></li>
<li class="chapter" data-level="6.5" data-path="lesson-06.html"><a href="lesson-06.html#HWL06S"><i class="fa fa-check"></i><b>6.5</b> Homework Solution</a><ul>
<li class="chapter" data-level="6.5.1" data-path="lesson-06.html"><a href="lesson-06.html#pseudocode-solution"><i class="fa fa-check"></i><b>6.5.1</b> Pseudocode solution</a></li>
<li class="chapter" data-level="6.5.2" data-path="lesson-06.html"><a href="lesson-06.html#scripts"><i class="fa fa-check"></i><b>6.5.2</b> Scripts</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="lesson-07.html"><a href="lesson-07.html"><i class="fa fa-check"></i><b>7</b> Lesson 07</a><ul>
<li class="chapter" data-level="7.1" data-path="lesson-07.html"><a href="lesson-07.html#building-memex---step-1"><i class="fa fa-check"></i><b>7.1</b> Building Memex - Step 1</a><ul>
<li class="chapter" data-level="7.1.1" data-path="lesson-07.html"><a href="lesson-07.html#pseudocode"><i class="fa fa-check"></i><b>7.1.1</b> Pseudocode</a></li>
<li class="chapter" data-level="7.1.2" data-path="lesson-07.html"><a href="lesson-07.html#code-snippets"><i class="fa fa-check"></i><b>7.1.2</b> Code snippets</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="lesson-06.html"><a href="lesson-06.html#HWL06"><i class="fa fa-check"></i><b>7.2</b> Homework</a></li>
<li class="chapter" data-level="7.3" data-path="lesson-07.html"><a href="lesson-07.html#HWL07S"><i class="fa fa-check"></i><b>7.3</b> Homework Solution</a><ul>
<li class="chapter" data-level="7.3.1" data-path="lesson-07.html"><a href="lesson-07.html#pseudocode-1"><i class="fa fa-check"></i><b>7.3.1</b> Pseudocode</a></li>
<li class="chapter" data-level="7.3.2" data-path="lesson-07.html"><a href="lesson-07.html#note-on-folderfile-organization"><i class="fa fa-check"></i><b>7.3.2</b> Note on Folder/File Organization</a></li>
<li class="chapter" data-level="7.3.3" data-path="lesson-07.html"><a href="lesson-07.html#script-1_build_structure.py"><i class="fa fa-check"></i><b>7.3.3</b> Script (<code>1_build_structure.py</code>)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="lesson-08.html"><a href="lesson-08.html"><i class="fa fa-check"></i><b>8</b> Lesson 08</a><ul>
<li class="chapter" data-level="8.1" data-path="lesson-08.html"><a href="lesson-08.html#building-memex---step-2"><i class="fa fa-check"></i><b>8.1</b> Building Memex - Step 2</a></li>
<li class="chapter" data-level="8.2" data-path="lesson-08.html"><a href="lesson-08.html#ocr-software-tesseract"><i class="fa fa-check"></i><b>8.2</b> OCR software: Tesseract</a></li>
<li class="chapter" data-level="8.3" data-path="lesson-08.html"><a href="lesson-08.html#task-general-map-pseudocode"><i class="fa fa-check"></i><b>8.3</b> Task: General Map Pseudocode</a></li>
<li class="chapter" data-level="8.4" data-path="lesson-08.html"><a href="lesson-08.html#code-snippets-functions"><i class="fa fa-check"></i><b>8.4</b> Code snippets &amp; functions</a><ul>
<li class="chapter" data-level="8.4.1" data-path="lesson-08.html"><a href="lesson-08.html#new-libraries"><i class="fa fa-check"></i><b>8.4.1</b> New libraries</a></li>
<li class="chapter" data-level="8.4.2" data-path="lesson-08.html"><a href="lesson-08.html#code-reuse"><i class="fa fa-check"></i><b>8.4.2</b> Code Reuse</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="lesson-08.html"><a href="lesson-08.html#clean-temporary-copy-of-a-pdf"><i class="fa fa-check"></i><b>8.5</b> Clean Temporary Copy of a PDF</a><ul>
<li class="chapter" data-level="8.5.1" data-path="lesson-08.html"><a href="lesson-08.html#ocr-ing-pdf"><i class="fa fa-check"></i><b>8.5.1</b> OCR-ing PDF</a></li>
<li class="chapter" data-level="8.5.2" data-path="lesson-08.html"><a href="lesson-08.html#missing-functions"><i class="fa fa-check"></i><b>8.5.2</b> Missing functions</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="lesson-08.html"><a href="lesson-08.html#one-more-note-on-ocr"><i class="fa fa-check"></i><b>8.6</b> One more note on OCR</a></li>
<li class="chapter" data-level="8.7" data-path="lesson-08.html"><a href="lesson-08.html#HWL08"><i class="fa fa-check"></i><b>8.7</b> Homework</a></li>
<li class="chapter" data-level="8.8" data-path="lesson-08.html"><a href="lesson-08.html#HWL08S"><i class="fa fa-check"></i><b>8.8</b> Homework Solution</a></li>
<li class="chapter" data-level="8.9" data-path="lesson-08.html"><a href="lesson-08.html#tesseract-language-codes"><i class="fa fa-check"></i><b>8.9</b> Tesseract Language Codes</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="lesson-09.html"><a href="lesson-09.html"><i class="fa fa-check"></i><b>9</b> Lesson 09</a><ul>
<li class="chapter" data-level="9.1" data-path="lesson-09.html"><a href="lesson-09.html#building-memex---step-3"><i class="fa fa-check"></i><b>9.1</b> Building Memex - Step 3</a></li>
<li class="chapter" data-level="9.2" data-path="lesson-08.html"><a href="lesson-08.html#code-snippets-functions"><i class="fa fa-check"></i><b>9.2</b> Code snippets &amp; functions</a><ul>
<li class="chapter" data-level="9.2.1" data-path="lesson-09.html"><a href="lesson-09.html#the-main-function-publication-interface"><i class="fa fa-check"></i><b>9.2.1</b> The main function: Publication Interface</a></li>
<li class="chapter" data-level="9.2.2" data-path="lesson-09.html"><a href="lesson-09.html#additional-functions"><i class="fa fa-check"></i><b>9.2.2</b> Additional functions</a></li>
<li class="chapter" data-level="9.2.3" data-path="lesson-09.html"><a href="lesson-09.html#extra-function"><i class="fa fa-check"></i><b>9.2.3</b> Extra function</a></li>
<li class="chapter" data-level="9.2.4" data-path="lesson-08.html"><a href="lesson-08.html#code-reuse"><i class="fa fa-check"></i><b>9.2.4</b> Code Reuse</a></li>
<li class="chapter" data-level="9.2.5" data-path="lesson-09.html"><a href="lesson-09.html#missing-functions-the-index-page-and-the-contents-page"><i class="fa fa-check"></i><b>9.2.5</b> Missing functions: The Index Page and the Contents Page</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="lesson-09.html"><a href="lesson-09.html#HWL09"><i class="fa fa-check"></i><b>9.3</b> Homework</a></li>
<li class="chapter" data-level="9.4" data-path="lesson-09.html"><a href="lesson-09.html#HWL09S"><i class="fa fa-check"></i><b>9.4</b> Homework Solution</a></li>
<li class="chapter" data-level="9.5" data-path="lesson-09.html"><a href="lesson-09.html#additional-materials-html-css-tfidf"><i class="fa fa-check"></i><b>9.5</b> Additional materials: HTML, CSS; TFIDF</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="lesson-10.html"><a href="lesson-10.html"><i class="fa fa-check"></i><b>10</b> Lesson 10</a><ul>
<li class="chapter" data-level="10.1" data-path="lesson-10.html"><a href="lesson-10.html#building-memex---step-4"><i class="fa fa-check"></i><b>10.1</b> Building Memex - Step 4</a></li>
<li class="chapter" data-level="10.2" data-path="lesson-10.html"><a href="lesson-10.html#some-explanations-tf-idf-document-distance"><i class="fa fa-check"></i><b>10.2</b> Some explanations: TF-IDF, Document Distance</a></li>
<li class="chapter" data-level="10.3" data-path="lesson-10.html"><a href="lesson-10.html#practicalities"><i class="fa fa-check"></i><b>10.3</b> Practicalities</a></li>
<li class="chapter" data-level="10.4" data-path="lesson-10.html"><a href="lesson-10.html#CSL10"><i class="fa fa-check"></i><b>10.4</b> Code Snippets</a><ul>
<li class="chapter" data-level="10.4.1" data-path="lesson-10.html"><a href="lesson-10.html#aggregating-publications-into-a-corpus"><i class="fa fa-check"></i><b>10.4.1</b> Aggregating publications into a corpus</a></li>
<li class="chapter" data-level="10.4.2" data-path="lesson-10.html"><a href="lesson-10.html#getting-tf-idf-values-and-distance-matrix-with-sklearn"><i class="fa fa-check"></i><b>10.4.2</b> Getting <em>tf-idf</em> Values and Distance Matrix with <code>sklearn</code></a></li>
<li class="chapter" data-level="10.4.3" data-path="lesson-10.html"><a href="lesson-10.html#converting-results"><i class="fa fa-check"></i><b>10.4.3</b> Converting Results</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="lesson-10.html"><a href="lesson-10.html#HWL10"><i class="fa fa-check"></i><b>10.5</b> Homework</a></li>
<li class="chapter" data-level="10.6" data-path="lesson-10.html"><a href="lesson-10.html#HWL10S"><i class="fa fa-check"></i><b>10.6</b> Homework Solution</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="syllabus.html"><a href="syllabus.html"><i class="fa fa-check"></i>Syllabus</a><ul>
<li class="chapter" data-level="" data-path="syllabus.html"><a href="syllabus.html#course-details"><i class="fa fa-check"></i>Course Details</a></li>
<li class="chapter" data-level="" data-path="syllabus.html"><a href="syllabus.html#aims-contents-and-method-of-the-course"><i class="fa fa-check"></i>Aims, Contents and Method of the Course</a></li>
<li class="chapter" data-level="" data-path="syllabus.html"><a href="syllabus.html#course-evaluation"><i class="fa fa-check"></i>Course Evaluation</a></li>
<li class="chapter" data-level="" data-path="syllabus.html"><a href="syllabus.html#class-participation"><i class="fa fa-check"></i>Class Participation</a></li>
<li class="chapter" data-level="" data-path="syllabus.html"><a href="syllabus.html#homework-assignments"><i class="fa fa-check"></i>Homework Assignments</a></li>
<li class="chapter" data-level="" data-path="syllabus.html"><a href="syllabus.html#final-project"><i class="fa fa-check"></i>Final Project</a></li>
<li class="chapter" data-level="" data-path="syllabus.html"><a href="syllabus.html#study-materials"><i class="fa fa-check"></i>Study materials</a></li>
<li class="chapter" data-level="" data-path="syllabus.html"><a href="syllabus.html#software-tools-technologies"><i class="fa fa-check"></i>Software, Tools, &amp; Technologies</a></li>
<li class="chapter" data-level="" data-path="syllabus.html"><a href="syllabus.html#schedule"><i class="fa fa-check"></i>Schedule</a></li>
<li class="chapter" data-level="" data-path="syllabus.html"><a href="syllabus.html#lesson-topics"><i class="fa fa-check"></i>Lesson Topics</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">070172-1 UE Methodological course - Introduction to DH: Tools &amp; Techniques (2020W) <code>Memex Edition</code></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="lesson-10" class="section level1">
<h1><span class="header-section-number">10</span> Lesson 10</h1>
<div id="building-memex---step-4" class="section level2">
<h2><span class="header-section-number">10.1</span> Building Memex - Step 4</h2>
<p>One of the most interesting aspects behind the idea of memex is connections among its texts: the network of algorithmically generated connections that would suggest one what else s/he should read or might be interested to read, based on what s/he is reading right now. There are plenty of different methods that are actively used in digital humanities to identify different kinds of similarities among texts in a <em>corpus</em>, a given body of texts. These methods may be used to identify duplicate or near-duplicate texts (<em>document distance</em>), to identify texts that cover similar themes and topics <span class="citation">(<em>topic modeling</em>: for example, Blei <a href="#ref-BleiProbabilistic2012">2012</a>)</span>, to identify texts that belong to the same forms and genres, to identify texts that might have been written by the same individual <span class="citation">(<em>stylometric analysis</em>: for example, Eder, Rybicki, and Kestemont <a href="#ref-EderStylometry2016">2016</a>)</span>, etc. What is common among all these methods is that they mathematically manipulate numeric abstractions of texts: first, texts are reduced to frequency lists of different kinds; then they are mathematically compared with each other in order to identify different types of similarities. What is different among all these methods is how the numeric abstraction is generated, what features are selected for comparison, and what kind of formulas/algorithms are used to generate similarity measures.</p>
<p>For our purpose, which would be finding thematically similar texts and sections of texts, we would benefit the most from using a combination of the <em>tf-idf</em> (<em>term-frequency - inverse document frequency</em>) method and a <em>document distance</em> algorithm. Chapter 1 of Ramsay’s <em>Reading Machines</em> <span class="citation">(Ramsay <a href="#ref-RamsayReading2011">2011</a>)</span>, which is digitally available via <a href="https://usearch.univie.ac.at/primo-explore/fulldisplay?docid=TN_cdi_proquest_miscellaneous_2131816455&amp;context=PC&amp;vid=UWI&amp;lang=en_US&amp;search_scope=UWI_UBBestand&amp;adaptor=primo_central_multiple_fe&amp;tab=default_tab&amp;query=any,contains,ramsay%20reading%20machines&amp;mode=basic">Uni Wien Library</a>, gives a nice general overview of the approach. Matthew Lavin’s Lavin’s <em>Analyzing Documents with TF-IDF</em> on <em>Programming Historian</em> <span class="citation">(Lavin <a href="#ref-LavinAnalyzing2019">2019</a>)</span> provides a detailed technical description of the entire approach. Please, make sure to read these.</p>
</div>
<div id="some-explanations-tf-idf-document-distance" class="section level2">
<h2><span class="header-section-number">10.2</span> Some explanations: TF-IDF, Document Distance</h2>
<p>To quickly sum up, the steps will be as follows:</p>
<ol style="list-style-type: decimal">
<li>[<strong>TF-IDF</strong>]</li>
</ol>
<ul>
<li>We calculate <em>term frequencies</em> of all terms in all documents (i.e., our OCR results). Term frequency is relative frequency, i.e. absolute frequency of a term divided by the overall number of terms in a document.</li>
<li>We then calculate <em>inverse document frequency</em>, computed as the logarithm of the number of the documents in the corpus divided by the number of documents where the specific term appears.</li>
<li>We then calculate <em>tf-idf</em> as a product of <em>tf</em> and <em>idf</em> values (sometimes additional steps are included to normalize results).</li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li>[<strong>Filtering</strong>]</li>
</ol>
<ul>
<li>before document distance is calculated, some filtering might be desirable. Filtering is useful and sometimes necessary for a number of reasons. For example, if we are looking for similarities between texts, we may want to exclude terms that occur only in a very small number of texts (additionally, considering that we work with imperfect OCR results, most terms with <em>df</em>=1 are likely to be incorrectly recognized words). Additionally, it also makes sense to filter out terms that occur in too many documents (those terms that occur in <em>all</em> documents would carry no relevant value). An important practical benefit of such filtering is that we will reduce the amount of data that will be used for calculations, and therefore less resources will be required for calculations and they will be done faster.</li>
<li>Additionally, filtering can be done by using language-specific lists of stopwords (for example, there is no need to include such English words as “a”, “the”, “and”, “or” into calculations). You can find lists of stopwords for specific languages <a href="https://github.com/Alir3z4/stop-words/tree/bd8cc1434faeb3449735ed570a4a392ab5d35291">online</a>. Many relevant python packages will have lists of stopwords already included. Curating your own lists of stopwords is usually the best practice.</li>
<li>Some other procedures can be used to improve results. For example stemming or, better, lemmatization will help to reduce morphological complexity of texts, which is particularly important for highly inflective and agglutinative languages. (however, stemming will also render results less readable). There are two caveats to consider before using these methods: first of all, both methods are language specific — in other words, for example, if you accidentaly apply English lemmatization to German (or the other way around), results will most likely be horrible; second, OCR results are not perfect: again, OCRing German text using <code>eng</code> as a language parameter in Tesseract may yield decent results, but all characters with umlauts are likely to be replaced with corresponding English characters; the results of applying lemmatization of stemming to such text will generate more errors. That said, one should still experiment with these methods.</li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li>[<strong>Document Distance Calculations</strong>]</li>
</ol>
<ul>
<li>last step: we apply some distance measure calcucations to each and every pair of documents/publications (which are now represented as numeric vectors).</li>
</ul>
<p><em>Practical Example</em>. Let’s take a look at a very simple example of comparing the following simple sentences using our approach:</p>
<ol style="list-style-type: decimal">
<li>President Obama returned from his trip to Europe.</li>
<li>President Bush returned from his trip to China.</li>
<li>The president returned from his trip.</li>
<li>And now about something completely different.</li>
</ol>
<p>As we discussed, we need to convert each text (sentence) into a frequency list. For calculations each text (sentence) is <em>vectorized</em>, i.e. frequencies of each word of each sentence are mapped on the entire vocabulary of the corpus (i.e., all analyzed texts). If any specific word is missing in a particilar text (sentence), its frequency is 0. This is shown in Table <a href="lesson-10.html#tab:vectorizedTexts">10.1</a> below.</p>
<table>
<caption><span id="tab:vectorizedTexts">Table 10.1: </span> Vectorized texts</caption>
<thead>
<tr class="header">
<th align="left"></th>
<th align="right">1</th>
<th align="right">2</th>
<th align="right">3</th>
<th align="right">4</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">about</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">and</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">bush</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">china</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">completely</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">different</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">europe</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">from</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">his</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">now</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">obama</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">president</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">returned</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">something</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">the</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">to</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">trip</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
<p>How would we then caclulate distances? The simplest distance to calculate will be <em>Manhattan</em> (or city-block) distance. Essentially, for each word/term, we need to substract the frequency in text 1 from the frequency in text 2.</p>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="right">1</th>
<th align="right">2</th>
<th align="right">Manhattan Distance 1-2</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">about</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">and</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">bush</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">|-1|</td>
</tr>
<tr class="even">
<td align="left">china</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">|-1|</td>
</tr>
<tr class="odd">
<td align="left">completely</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">different</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">europe</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">from</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">his</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">now</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">obama</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">president</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">returned</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">something</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">the</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">to</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">trip</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
<p>Then we simply add up absolute values (i.e., treating negative values in the last column as positive) — and that is the distance value: Manhattan distance between sentence 1 and sentence 2 is 4. The symmetric matrix below shows Manhattan distances for all four sentences. These values show that sentences 1, 2, and 3 are quite similar, while sentence 4 is very different from 1, 2, and 3.</p>
<table>
<caption><span id="tab:matrix1">Table 10.2: </span> Symmetric Matrix with Distances</caption>
<thead>
<tr class="header">
<th align="right"></th>
<th align="right">1</th>
<th align="right">2</th>
<th align="right">3</th>
<th align="right">4</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right"><strong>1</strong></td>
<td align="right">0</td>
<td align="right">4</td>
<td align="right">5</td>
<td align="right">14</td>
</tr>
<tr class="even">
<td align="right"><strong>2</strong></td>
<td align="right">4</td>
<td align="right">0</td>
<td align="right">5</td>
<td align="right">14</td>
</tr>
<tr class="odd">
<td align="right"><strong>3</strong></td>
<td align="right">5</td>
<td align="right">5</td>
<td align="right">0</td>
<td align="right">11</td>
</tr>
<tr class="even">
<td align="right"><strong>4</strong></td>
<td align="right">14</td>
<td align="right">14</td>
<td align="right">11</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
<p>If we apply filtering to the first three sentences, removing words with <code>df=1</code>, you can see that the first two sentences become identical (Manhattan distance = 0), and the sentence 3 is very close: all three talking about the <em>president returning from his trip</em>:</p>
<ol style="list-style-type: decimal">
<li>President <del>Obama</del> returned from his trip to <del>Europe</del>.</li>
<li>President <del>Bush</del> returned from his trip to <del>China</del>.</li>
<li><del>The</del> president returned from his trip.</li>
</ol>
<p><em>Other distance measures</em>. There is a variety of different distances that are meant to be more efficient in particular circumstances. Most common distances are Euclidean, Manhattan, and cosine. By and large, cosine distance/similarity<a href="#fn8" class="footnote-ref" id="fnref8"><sup>8</sup></a> would be your most optimal option. Main reasons are: 1) both Euclidean and Manhattan tend to give more weight to the most frequent terms; 2) neither Euclidean nor Manhattan are normalized (in their original forms), i.e their values are between 0 and <em>infinity</em>, while cosine distance values are between 0 and 1; 3) since cosine distance focuses on an <em>angle</em> between the vectors of texts in multidimensional space, rather than on the actual distance, it yields better results for texts of varying lengths on same topics (for example, between monographs and articles). You can read more about differences between these distance measures in John Ladd’s “Understanding and Using Common Similarity Measures for Text Analysis” at <em>Programming Historian</em> <span class="citation">(Ladd <a href="#ref-LaddUnderstanding2020">2020</a>)</span>.</p>
<p>The image below offers a graphical representation of these three distances, where <code>A</code> and <code>B</code> are two different texts and <code>y</code> and <code>x</code> are words — <code>y</code> occurs 5 times in <code>A</code> and 2 times in <code>B</code>; <code>x</code> occurs 2 times in <code>A</code> and 4 times in <code>B</code>.</p>
<p><img src="images/distance_viz.png" /></p>
<p>Why Manhattan (city-block) distance is called that way?</p>
<p><img src="images/manhattan2.jpg" /></p>
</div>
<div id="practicalities" class="section level2">
<h2><span class="header-section-number">10.3</span> Practicalities</h2>
<p>Only a mere few years ago we would have had to write our own code for each and every step described above. Luckily, we now python libraries that efficiently do all the heavy lifting for us. One such library is <code>sklearn</code>; another library which is very useful is <code>pandas</code> (make sure to install both!). Below you can find all relevant code snippets which you will need to put together to complete this part.</p>
<p>What do we need to generate? You will need to put together the following code snippets in order to produce two json files. The first one must contain top keywords for each publication. The second one must contain distances between publications. If you do everything as expected your results will look like the following:</p>
<p>File with <em>tf-idf</em> keywords:</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb72-1" title="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb72-2" title="2">    <span class="dt">&quot;AdamsShepherds2006&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb72-3" title="3">        <span class="dt">&quot;adams&quot;</span><span class="fu">:</span> <span class="fl">0.1272164898033877</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb72-4" title="4">        <span class="dt">&quot;administrative&quot;</span><span class="fu">:</span> <span class="fl">0.099074881442255</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb72-5" title="5">        <span class="dt">&quot;animals&quot;</span><span class="fu">:</span> <span class="fl">0.07099486255345346</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb72-6" title="6">        <span class="dt">&quot;bala&quot;</span><span class="fu">:</span> <span class="fl">0.08924612054231096</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb72-7" title="7">        <span class="dt">&quot;barley&quot;</span><span class="fu">:</span> <span class="fl">0.06046074109305735</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb72-8" title="8">        <span class="dt">&quot;corvée&quot;</span><span class="fu">:</span> <span class="fl">0.09158504454505918</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb72-9" title="9">        <span class="dt">&quot;cuneiform&quot;</span><span class="fu">:</span> <span class="fl">0.09386636316636131</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb72-10" title="10">        <span class="dt">&quot;dagan&quot;</span><span class="fu">:</span> <span class="fl">0.061182271700903075</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb72-11" title="11">        <span class="dt">&quot;dec&quot;</span><span class="fu">:</span> <span class="fl">0.09320481910701102</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb72-12" title="12">        <span class="dt">&quot;dynasty&quot;</span><span class="fu">:</span> <span class="fl">0.09595469820881344</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb72-13" title="13">        <span class="dt">&quot;fattening&quot;</span><span class="fu">:</span> <span class="fl">0.052203662027505905</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb72-14" title="14">        <span class="dt">&quot;flocks&quot;</span><span class="fu">:</span> <span class="fl">0.05101452549985564</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb72-15" title="15">        <span class="dt">&quot;gangs&quot;</span><span class="fu">:</span> <span class="fl">0.057181428331652115</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb72-16" title="16">        <span class="dt">&quot;herds&quot;</span><span class="fu">:</span> <span class="fl">0.09616271243655308</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb72-17" title="17">        <span class="dt">&quot;husbandry&quot;</span><span class="fu">:</span> <span class="fl">0.0958209157684203</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb72-18" title="18">        <span class="dt">&quot;iii&quot;</span><span class="fu">:</span> <span class="fl">0.13276591518791975</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb72-19" title="19">        <span class="dt">&quot;labor&quot;</span><span class="fu">:</span> <span class="fl">0.12346932617991906</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb72-20" title="20">        <span class="dt">&quot;lagash&quot;</span><span class="fu">:</span> <span class="fl">0.14169565407465887</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb72-21" title="21">        <span class="dt">&quot;mcc&quot;</span><span class="fu">:</span> <span class="fl">0.13380706013477167</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb72-22" title="22">        <span class="dt">&quot;pasturage&quot;</span><span class="fu">:</span> <span class="fl">0.0587244796687148</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb72-23" title="23">        <span class="dt">&quot;population&quot;</span><span class="fu">:</span> <span class="fl">0.05990187305273483</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb72-24" title="24">        <span class="dt">&quot;presently&quot;</span><span class="fu">:</span> <span class="fl">0.05103796476580478</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb72-25" title="25">        <span class="dt">&quot;prosopographic&quot;</span><span class="fu">:</span> <span class="fl">0.052203662027505905</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb72-26" title="26">        <span class="dt">&quot;province&quot;</span><span class="fu">:</span> <span class="fl">0.05866419351034984</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb72-27" title="27">        <span class="dt">&quot;records&quot;</span><span class="fu">:</span> <span class="fl">0.10031873550890447</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb72-28" title="28">        <span class="dt">&quot;robert&quot;</span><span class="fu">:</span> <span class="fl">0.07360610776912387</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb72-29" title="29">        <span class="dt">&quot;scribal&quot;</span><span class="fu">:</span> <span class="fl">0.07822478752418302</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb72-30" title="30">        <span class="dt">&quot;sheep&quot;</span><span class="fu">:</span> <span class="fl">0.15851065662360858</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb72-31" title="31">        <span class="dt">&quot;shepherd&quot;</span><span class="fu">:</span> <span class="fl">0.06216523460065599</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb72-32" title="32">        <span class="dt">&quot;shepherds&quot;</span><span class="fu">:</span> <span class="fl">0.33326918149698254</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb72-33" title="33">        <span class="dt">&quot;steinkeller&quot;</span><span class="fu">:</span> <span class="fl">0.17951743245184246</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb72-34" title="34">        <span class="dt">&quot;tue&quot;</span><span class="fu">:</span> <span class="fl">0.08198952007025857</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb72-35" title="35">        <span class="dt">&quot;umma&quot;</span><span class="fu">:</span> <span class="fl">0.43749736307561765</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb72-36" title="36">        <span class="dt">&quot;ur&quot;</span><span class="fu">:</span> <span class="fl">0.37598501212878616</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb72-37" title="37">        <span class="dt">&quot;wool&quot;</span><span class="fu">:</span> <span class="fl">0.11190732190242117</span></a>
<a class="sourceLine" id="cb72-38" title="38">    <span class="fu">},</span></a>
<a class="sourceLine" id="cb72-39" title="39">    <span class="dt">&quot;GarfinkleShepherds2004&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb72-40" title="40">        <span class="dt">&quot;babylonian&quot;</span><span class="fu">:</span> <span class="fl">0.07650357591327776</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb72-41" title="41">        <span class="dt">&quot;barley&quot;</span><span class="fu">:</span> <span class="fl">0.09592656463776685</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb72-42" title="42">        <span class="dt">&quot;consumptive&quot;</span><span class="fu">:</span> <span class="fl">0.05337901001432162</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb72-43" title="43">        <span class="dt">&quot;credit&quot;</span><span class="fu">:</span> <span class="fl">0.08335590154194376</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb72-44" title="44">        <span class="dt">&quot;creditor&quot;</span><span class="fu">:</span> <span class="fl">0.13067922107308225</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb72-45" title="45">        <span class="dt">&quot;creditors&quot;</span><span class="fu">:</span> <span class="fl">0.07268117801701256</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb72-46" title="46">        <span class="dt">&quot;customary&quot;</span><span class="fu">:</span> <span class="fl">0.10111479309463182</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb72-47" title="47">        <span class="dt">&quot;debtor&quot;</span><span class="fu">:</span> <span class="fl">0.11012714465515581</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb72-48" title="48">        <span class="dt">&quot;duration&quot;</span><span class="fu">:</span> <span class="fl">0.056149153215818835</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb72-49" title="49">        <span class="dt">&quot;garfinkle&quot;</span><span class="fu">:</span> <span class="fl">0.12961758742186816</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb72-50" title="50">        <span class="dt">&quot;gin&quot;</span><span class="fu">:</span> <span class="fl">0.08170723635705109</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb72-51" title="51">        <span class="dt">&quot;iii&quot;</span><span class="fu">:</span> <span class="fl">0.1513526344445101</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb72-52" title="52">        <span class="dt">&quot;institutional&quot;</span><span class="fu">:</span> <span class="fl">0.07383767826894902</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb72-53" title="53">        <span class="dt">&quot;labor&quot;</span><span class="fu">:</span> <span class="fl">0.08619402867315176</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb72-54" title="54">        <span class="dt">&quot;lending&quot;</span><span class="fu">:</span> <span class="fl">0.10344979020528536</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb72-55" title="55">        <span class="dt">&quot;loan&quot;</span><span class="fu">:</span> <span class="fl">0.356626414161827</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb72-56" title="56">        <span class="dt">&quot;loans&quot;</span><span class="fu">:</span> <span class="fl">0.5995451434314758</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb72-57" title="57">        <span class="dt">&quot;mesopotamia&quot;</span><span class="fu">:</span> <span class="fl">0.05251561096144549</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb72-58" title="58">        <span class="dt">&quot;nippur&quot;</span><span class="fu">:</span> <span class="fl">0.06739596933652772</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb72-59" title="59">        <span class="dt">&quot;phrase&quot;</span><span class="fu">:</span> <span class="fl">0.05161099475107544</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb72-60" title="60">        <span class="dt">&quot;ra&quot;</span><span class="fu">:</span> <span class="fl">0.09626067026962869</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb72-61" title="61">        <span class="dt">&quot;rate&quot;</span><span class="fu">:</span> <span class="fl">0.06123888031779106</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb72-62" title="62">        <span class="dt">&quot;repaid&quot;</span><span class="fu">:</span> <span class="fl">0.06660264626574453</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb72-63" title="63">        <span class="dt">&quot;repayment&quot;</span><span class="fu">:</span> <span class="fl">0.1252001522028668</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb72-64" title="64">        <span class="dt">&quot;shepherds&quot;</span><span class="fu">:</span> <span class="fl">0.06507845149950617</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb72-65" title="65">        <span class="dt">&quot;si&quot;</span><span class="fu">:</span> <span class="fl">0.06021635652206201</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb72-66" title="66">        <span class="dt">&quot;silver&quot;</span><span class="fu">:</span> <span class="fl">0.08912141278136604</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb72-67" title="67">        <span class="dt">&quot;steinkeller&quot;</span><span class="fu">:</span> <span class="fl">0.0744916541514434</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb72-68" title="68">        <span class="dt">&quot;steven&quot;</span><span class="fu">:</span> <span class="fl">0.05335019010356139</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb72-69" title="69">        <span class="dt">&quot;sé&quot;</span><span class="fu">:</span> <span class="fl">0.07000447780472778</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb72-70" title="70">        <span class="dt">&quot;ur&quot;</span><span class="fu">:</span> <span class="fl">0.42847893151061767</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb72-71" title="71">        <span class="dt">&quot;witnesses&quot;</span><span class="fu">:</span> <span class="fl">0.06663117140384797</span></a>
<a class="sourceLine" id="cb72-72" title="72">    <span class="fu">},</span></a>
<a class="sourceLine" id="cb72-73" title="73"><span class="fu">}</span></a></code></pre></div>
<p>File with distances (more correctly: cosine similarities):</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb73-1" title="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb73-2" title="2">    <span class="dt">&quot;AbdullahMandaean2018&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb73-3" title="3">        <span class="dt">&quot;AlonSheikh2016&quot;</span><span class="fu">:</span> <span class="fl">0.2915990327301636</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb73-4" title="4">        <span class="dt">&quot;MinawiRhetoric2015&quot;</span><span class="fu">:</span> <span class="fl">0.277281021038338</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb73-5" title="5">        <span class="dt">&quot;PetriatCaravan2019&quot;</span><span class="fu">:</span> <span class="fl">0.27332888217367635</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb73-6" title="6">        <span class="dt">&quot;RiedlerCommunal2018&quot;</span><span class="fu">:</span> <span class="fl">0.25970501516946726</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb73-7" title="7">        <span class="dt">&quot;SaracogluReview2013&quot;</span><span class="fu">:</span> <span class="fl">0.2882066212119597</span></a>
<a class="sourceLine" id="cb73-8" title="8">    <span class="fu">},</span></a>
<a class="sourceLine" id="cb73-9" title="9">    <span class="dt">&quot;AdamsShepherds2006&quot;</span><span class="fu">:</span> <span class="fu">{</span></a>
<a class="sourceLine" id="cb73-10" title="10">        <span class="dt">&quot;GarfinkleReview2005&quot;</span><span class="fu">:</span> <span class="fl">0.3542751363967858</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb73-11" title="11">        <span class="dt">&quot;GarfinkleShepherds2004&quot;</span><span class="fu">:</span> <span class="fl">0.30286604455405086</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb73-12" title="12">        <span class="dt">&quot;ReidRunaways2015&quot;</span><span class="fu">:</span> <span class="fl">0.2812514791059143</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb73-13" title="13">        <span class="dt">&quot;WidellReflections2005&quot;</span><span class="fu">:</span> <span class="fl">0.27154646436723745</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb73-14" title="14">        <span class="dt">&quot;ZettlerReconstructing2003&quot;</span><span class="fu">:</span> <span class="fl">0.32977887642906156</span></a>
<a class="sourceLine" id="cb73-15" title="15">    <span class="fu">}</span></a>
<a class="sourceLine" id="cb73-16" title="16"><span class="fu">}</span></a></code></pre></div>
<p><em>Note</em>: in both files higher values mean more relevance and importance; in the second example (<code>AdamsShepherds2006</code>) all algorithmically identified articles are dealing with ancient Mesopotamian history, and even more specifically, with the Third Dynasty of Ur <span class="citation">(See, Adams <a href="#ref-AdamsShepherds2006">2006</a>; Garfinkle <a href="#ref-GarfinkleReview2005">2005</a>, <a href="#ref-GarfinkleShepherds2004">2004</a>; Reid <a href="#ref-ReidRunaways2015">2015</a>; Widell <a href="#ref-WidellReflections2005">2005</a>; Zettler <a href="#ref-ZettlerReconstructing2003">2003</a>)</span>. Keep in mind that <em>tf-idf</em> keywords are heavily filtered in the example.</p>
</div>
<div id="CSL10" class="section level2">
<h2><span class="header-section-number">10.4</span> Code Snippets</h2>
<p>The following code snippets are fully working and functional. All you need to do is to put them together properly.</p>
<div id="aggregating-publications-into-a-corpus" class="section level3">
<h3><span class="header-section-number">10.4.1</span> Aggregating publications into a corpus</h3>
<p>The code snippet below processes all <code>.json</code> files from our memex (remember that we saved our OCR results using this extension; it might be better to use some unique extension though, something like <code>.OCRED</code>, so that we clearly keep different types of files apart). The code below 1) generates a dictionary with citekeys as keys and paths to <code>.json</code> files as values; 2) it then loops through citekeys and, 3) with each iteration of the loop, it loads each OCRed results and updates two lists: one with citekeys and another with texts. The result is all our data sorted into two lists, where items with the same index position are the citation key and the text of the same publication. We will use these lists to generate a table, similar to Table <a href="lesson-10.html#tab:vectorizedTexts">10.1</a> above. Look carefully at the code. What else does this code do?</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb74-1" title="1">ocrFiles <span class="op">=</span> functions.dicOfRelevantFiles(pathToMemex, <span class="st">&quot;.json&quot;</span>)</a>
<a class="sourceLine" id="cb74-2" title="2">citeKeys <span class="op">=</span> <span class="bu">list</span>(ocrFiles.keys())</a>
<a class="sourceLine" id="cb74-3" title="3"></a>
<a class="sourceLine" id="cb74-4" title="4">docList   <span class="op">=</span> []</a>
<a class="sourceLine" id="cb74-5" title="5">docIdList <span class="op">=</span> []</a>
<a class="sourceLine" id="cb74-6" title="6"></a>
<a class="sourceLine" id="cb74-7" title="7">corpusDic <span class="op">=</span> {}</a>
<a class="sourceLine" id="cb74-8" title="8"><span class="cf">for</span> citeKey <span class="kw">in</span> citeKeys:</a>
<a class="sourceLine" id="cb74-9" title="9">    docData <span class="op">=</span> json.load(<span class="bu">open</span>(ocrFiles[citeKey]))</a>
<a class="sourceLine" id="cb74-10" title="10">    </a>
<a class="sourceLine" id="cb74-11" title="11">    docId <span class="op">=</span> citeKey</a>
<a class="sourceLine" id="cb74-12" title="12">    doc   <span class="op">=</span> <span class="st">&quot; &quot;</span>.join(docData.values())</a>
<a class="sourceLine" id="cb74-13" title="13"></a>
<a class="sourceLine" id="cb74-14" title="14">    doc <span class="op">=</span> re.sub(<span class="vs">r&#39;(\w)-\n(\w)&#39;</span>, <span class="vs">r&#39;\1\2&#39;</span>, doc)</a>
<a class="sourceLine" id="cb74-15" title="15">    doc <span class="op">=</span> re.sub(<span class="st">&#39;\W+&#39;</span>, <span class="st">&#39; &#39;</span>, doc)</a>
<a class="sourceLine" id="cb74-16" title="16">    doc <span class="op">=</span> re.sub(<span class="st">&#39;\d+&#39;</span>, <span class="st">&#39; &#39;</span>, doc)</a>
<a class="sourceLine" id="cb74-17" title="17">    doc <span class="op">=</span> re.sub(<span class="st">&#39; +&#39;</span>, <span class="st">&#39; &#39;</span>, doc)</a>
<a class="sourceLine" id="cb74-18" title="18"></a>
<a class="sourceLine" id="cb74-19" title="19">    docList.append(doc)</a>
<a class="sourceLine" id="cb74-20" title="20">    docIdList.append(docId)</a></code></pre></div>
</div>
<div id="getting-tf-idf-values-and-distance-matrix-with-sklearn" class="section level3">
<h3><span class="header-section-number">10.4.2</span> Getting <em>tf-idf</em> Values and Distance Matrix with <code>sklearn</code></h3>
<p>Now that we have our texts prepared, we can use the <code>sklearn</code> library to do all the tricky transformations (for detailed documentation on this library see <a href="https://scikit-learn.org/stable/user_guide.html">official user guide</a>); we will also need library <code>pandas</code>. We need to make sure that both librares are installed and proper modules are loaded in the following manner:</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb75-1" title="1"><span class="im">import</span> pandas <span class="im">as</span> pd</a>
<a class="sourceLine" id="cb75-2" title="2"><span class="im">from</span> sklearn.feature_extraction.text <span class="im">import</span> (CountVectorizer, TfidfTransformer)</a>
<a class="sourceLine" id="cb75-3" title="3"><span class="im">from</span> sklearn.metrics.pairwise <span class="im">import</span> cosine_similarity</a></code></pre></div>
<p>The <code>sklearn</code> library condenses rather elaborate code into just a few lines. The following lines of code convert our data into a format similar to what you can see in Table <a href="lesson-10.html#tab:vectorizedTexts">10.1</a> above. The only difference is that instead of frequencies we will have <em>tf-idf</em> values — these results are saved into the variable <code>vectorized</code> (as <a href="https://en.wikipedia.org/wiki/Sparse_matrix">sparse matrix</a>). The last line of code generates cosine distances — these results are saved into the variable <code>cosineMatrix</code> (a symmetric matrix, similar to what you can see in Table <a href="lesson-10.html#tab:matrix1">10.2</a> above)</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb76-1" title="1">vectorizer <span class="op">=</span> CountVectorizer(ngram_range<span class="op">=</span>(<span class="dv">1</span>,<span class="dv">1</span>), min_df<span class="op">=</span><span class="dv">5</span>, max_df<span class="op">=</span><span class="fl">0.5</span>)</a>
<a class="sourceLine" id="cb76-2" title="2">countVectorized <span class="op">=</span> vectorizer.fit_transform(docList)</a>
<a class="sourceLine" id="cb76-3" title="3">tfidfTransformer <span class="op">=</span> TfidfTransformer(smooth_idf<span class="op">=</span><span class="va">True</span>, use_idf<span class="op">=</span><span class="va">True</span>)</a>
<a class="sourceLine" id="cb76-4" title="4">vectorized <span class="op">=</span> tfidfTransformer.fit_transform(countVectorized) <span class="co"># https://en.wikipedia.org/wiki/Sparse_matrix</span></a>
<a class="sourceLine" id="cb76-5" title="5">cosineMatrix <span class="op">=</span> cosine_similarity(vectorized)</a></code></pre></div>
<p>Perhaps the most important line to understand in the snippet above is the very first one where we create our own <em>vectorizer</em>: here we can adjust parameters to get different results. (More on parameters <a href="https://scikit-learn.org/stable/modules/generated/sklearn.feature_extraction.text.CountVectorizer.html">here</a>).</p>
<ul>
<li><code>ngram_range</code> can be defined as follows (To remind you of what ngram is, see Figure <a href="lesson-10.html#fig:ngram">10.1</a>):
<ul>
<li><code>(1, 1)</code> only unigrams (single tokens) will be considered;</li>
<li><code>(1, 2)</code> means that both unigrams and bigrams will be considered;</li>
<li><code>(2, 2)</code> means only bigrams.</li>
</ul></li>
</ul>
<div class="figure"><span id="fig:ngram"></span>
<img src="images/ngram.png" alt=" What is ngram? Source: StackOverflow" />
<p class="caption">Figure 10.1:  What is ngram? <a href="https://stackoverflow.com/questions/18193253/">Source: StackOverflow</a></p>
</div>
<ul>
<li><code>min_df</code> and <code>max_df</code> are parameters to filter out terms with <em>document frequency</em> below (<code>max_df</code>) or above (<code>min_df</code>) certain threshold. (Using <em>float</em> between 0 and 1 will filter out specific percentage.)
<ul>
<li><code>min_df</code> is defined as 5, meaning that all words that occur in less than 5 documents will be excluded.</li>
<li><code>max_df</code> is defined as 0.5, meaning that words that occur in more than half of all documents will be excluded as well.</li>
<li><strong>Note:</strong> It makes sense to experiment with these parameters (defining them in the <code>settings.yml</code> will make it easier to experiment).</li>
</ul></li>
</ul>
</div>
<div id="converting-results" class="section level3">
<h3><span class="header-section-number">10.4.3</span> Converting Results</h3>
<p><code>sklearn</code> generates needed results with just a few lines of code, which runs very fast (even with thousands documents). In order to make calculations fast, <code>sklearn</code> (as well as other similar libraries) use matrices (both <a href="https://en.wikipedia.org/wiki/Sparse_matrix">symmetric and sparse</a>), which are not exactly human readable. For example, my memex includes 1,140 documents, so the size of the distance matrix will be 1,140 x 1,140. The size of the <em>tf-idf</em> matrix will be 1,140 x 381,742! If we apply filtering (as in the code above), the <em>tf-idf</em> matrix shrinks quite significantly — down to 1,140 x 56,073 — but this is still not exactly usable. Most generated results are not really interesting.</p>
<p>Matrices and dataframes (or tables) are rectangular and, for this reason, are quit difficult to filter. So, we need to convert this data in a more manageable format, filter out values outside of a specific range, and then save into some easy-to-use format that we can incorporate into our memex. The following lines of code show how to do the conversion into a dictionary. Your task will be to write code that loops through the dictionary and filters out irrelevant results.</p>
<p>With <code>sklearn</code> we have created two matrices: the first one — <code>vectorized</code> — is a <em>sparse</em> matrix of <em>tf-idf</em> values; and the second one — <code>cosineMatrix</code> — is a <em>symmetric</em> matrix of cosine distances. These two types of matrices have different format and have to be processed slightly differently. (You can think of a <em>sparse</em> matrix as a sort-of compressed matrix, which stores only non-zero values; again, check <a href="https://en.wikipedia.org/wiki/Sparse_matrix">this description</a>).</p>
<p><strong>Converting a sparse matrix into a dataframe, and then into a dictionary</strong> (the optional line prints out the shape of your dataframe, i.e. the number of columns and rows, which will give you a good idea about the size of your data).</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb77-1" title="1">tfidfTable <span class="op">=</span> pd.DataFrame(vectorized.toarray(), index<span class="op">=</span>docIdList, columns<span class="op">=</span>vectorizer.get_feature_names())</a>
<a class="sourceLine" id="cb77-2" title="2"><span class="bu">print</span>(<span class="st">&quot;tfidfTable Shape: &quot;</span>, tfidfTable.shape) <span class="co"># optional</span></a>
<a class="sourceLine" id="cb77-3" title="3">tfidfTable <span class="op">=</span> tfidfTable.transpose()</a>
<a class="sourceLine" id="cb77-4" title="4">tfidfTableDic <span class="op">=</span> tfidfTable.to_dict()</a></code></pre></div>
<p><strong>Converting a symmetric matrix into a dataframe, and then into a dictionary</strong> (the optional line prints out the shape of your dataframe, i.e. the number of columns and rows, which will give you a good idea about the size of your data).</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb78-1" title="1">cosineTable <span class="op">=</span> pd.DataFrame(cosineMatrix)</a>
<a class="sourceLine" id="cb78-2" title="2"><span class="bu">print</span>(<span class="st">&quot;cosineTable Shape: &quot;</span>, cosineTable.shape) <span class="co"># optional</span></a>
<a class="sourceLine" id="cb78-3" title="3">cosineTable.columns <span class="op">=</span> docIdList</a>
<a class="sourceLine" id="cb78-4" title="4">cosineTable.index <span class="op">=</span> docIdList</a>
<a class="sourceLine" id="cb78-5" title="5">cosineTableDic <span class="op">=</span> cosineTable.to_dict()</a></code></pre></div>
<p>Now you have dictionaries of both datasets! You already know how to save dictionaries into JSON files, but you need to filter these dictionaries first. <strong><em>Task</em>: write the code that filters these dictionaries</strong>. Both dictionaries have the same structure, so you should be able to use the same function on both of them. I would recommend that with <em>tf-idf</em> terms you keep only words with value at least 0.05. For distance measures — include items with value at least 0.25 (keep in mind that this data will also include matches of each publications against itself – with value ~1 – so you would want to filter out such matches). In both cases you may have to experiment with the parameters to get usable results.</p>
<p><strong>Important:</strong> do not use <code>.json</code> extension, because it will conflict with other parts of our code, as we assume that all files with extension <code>.json</code> store OCR results.</p>
<!--
### Processing and Saving Results

The following function can be helpful to filter out irrelevant matches. But keep in mind that this function will work only with a dictionary in a specific format --- like the ones shown in the examples above! You can always adjust this function, of course.

```python
def filterTfidfDictionary(dictionary, threshold, lessOrMore):
    dictionaryFilt = {}

    for item1, citeKeyDist in dictionary.items():
        dictionaryFilt[item1] = {}
        for item2, value in citeKeyDist.items():
            if lessOrMore == "less":
                if value <= threshold:
                    if item1 != item2:
                        dictionaryFilt[item1][item2] = value
            elif lessOrMore == "more":
                if value >= threshold:
                    if item1 != item2:
                        dictionaryFilt[item1][item2] = value
            else:
                sys.exit("`lessOrMore` parameter must be `less` or `more`")

        if dictionaryFilt[item1] == {}:
            dictionaryFilt.pop(item1)
    
    return(dictionaryFilt)
```
-->
</div>
</div>
<div id="HWL10" class="section level2">
<h2><span class="header-section-number">10.5</span> Homework</h2>
<ul>
<li>the main task is to generate two json files with the following:
<ul>
<li>the first one must include main keywords for each publications (identified with the <em>tf-idf</em> approach).</li>
<li>the second one must include distances between all publications in your memex (you can/should filter out irrelevant matches — this will make the file with results smaller and more manageable).</li>
</ul></li>
<li>additionally, take the solution scripts from the previous lesson and annotate every line of code; submit your annotations together with the main assignment; if you have any suggestions for improvements, please share them (this will count as extra points :).</li>
<li>upload your results to your memex github repository
<ul>
<li>place annotated scripts into <code>_misc</code> subfolder</li>
</ul></li>
</ul>
</div>
<div id="HWL10S" class="section level2">
<h2><span class="header-section-number">10.6</span> Homework Solution</h2>
<p><em>stay tuned</em></p>

</div>
</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-AdamsShepherds2006">
<p>Adams, Robert McC. 2006. “Shepherds at Umma in the Third Dynasty of Ur: Interlocutors with a World Beyond the Scribal Field of Ordered Vision.” <em>Journal of the Economic and Social History of the Orient</em> 49 (2): 133–69. <a href="http://www.jstor.org/stable/25165137">http://www.jstor.org/stable/25165137</a>.</p>
</div>
<div id="ref-BleiProbabilistic2012">
<p>Blei, David M. 2012. “Probabilistic Topic Models.” <em>Communications of the ACM</em> 55 (4): 77. <a href="https://doi.org/10.1145/2133806.2133826">https://doi.org/10.1145/2133806.2133826</a>.</p>
</div>
<div id="ref-EderStylometry2016">
<p>Eder, Maciej, Jan Rybicki, and Mike Kestemont. 2016. “Stylometry with R: A Package for Computational Text Analysis.” <em>The R Journal</em> 8 (1): 107–21. <a href="http://journal.r-project.org/archive/2016/RJ-2016-007/index.html">http://journal.r-project.org/archive/2016/RJ-2016-007/index.html</a>.</p>
</div>
<div id="ref-GarfinkleShepherds2004">
<p>Garfinkle, Steven J. 2004. “Shepherds, Merchants, and Credit: Some Observations on Lending Practices in Ur III Mesopotamia.” <em>Journal of the Economic and Social History of the Orient</em> 47 (1): 1–30. <a href="http://www.jstor.org/stable/25165020">http://www.jstor.org/stable/25165020</a>.</p>
</div>
<div id="ref-GarfinkleReview2005">
<p>Garfinkle, Steven J. 2005. “Review of the Administrative and Economic Ur III Texts from the City of Ur.” <em>Journal of the Economic and Social History of the Orient</em> 48 (1): 122–24. <a href="http://www.jstor.org/stable/25165081">http://www.jstor.org/stable/25165081</a>.</p>
</div>
<div id="ref-LaddUnderstanding2020">
<p>Ladd, John R. 2020. “Understanding and Using Common Similarity Measures for Text Analysis.” Edited by Brandon Walsh. <em>The Programming Historian</em>, no. 9 (May). <a href="https://doi.org/10.46430/phen0089">https://doi.org/10.46430/phen0089</a>.</p>
</div>
<div id="ref-LavinAnalyzing2019">
<p>Lavin, Matthew J. 2019. “Analyzing Documents with TF-IDF.” Edited by Zoe LeBlanc. <em>The Programming Historian</em>, no. 8 (May). <a href="https://doi.org/10.46430/phen0082">https://doi.org/10.46430/phen0082</a>.</p>
</div>
<div id="ref-RamsayReading2011">
<p>Ramsay, Stephen. 2011. <em>Reading Machines: Toward an Algorithmic Criticism</em>. Topics in the Digital Humanities. Urbana: University of Illinois Press.</p>
</div>
<div id="ref-ReidRunaways2015">
<p>Reid, John Nicholas. 2015. “Runaways and Fugitive-Catchers During the Third Dynasty of Ur.” <em>Journal of the Economic and Social History of the Orient</em> 58 (4): 576–605. <a href="http://www.jstor.org/stable/43919255">http://www.jstor.org/stable/43919255</a>.</p>
</div>
<div id="ref-WidellReflections2005">
<p>Widell, Magnus. 2005. “Some Reflections on Babylonian Exchange During the End of the Third Millennium BC.” <em>Journal of the Economic and Social History of the Orient</em> 48 (3): 388–400. <a href="http://www.jstor.org/stable/25165106">http://www.jstor.org/stable/25165106</a>.</p>
</div>
<div id="ref-ZettlerReconstructing2003">
<p>Zettler, Richard L. 2003. “Reconstructing the World of Ancient Mesopotamia: Divided Beginnings and Holistic History.” <em>Journal of the Economic and Social History of the Orient</em> 46 (1): 3–45. <a href="http://www.jstor.org/stable/3632803">http://www.jstor.org/stable/3632803</a>.</p>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="8">
<li id="fn8"><p>You can come across both <em>cosine distance</em> and <em>cosine similarity</em>, which may be a bit confusing. Both values are in the range between 0 and 1. However, in the case of <em>cosine distance</em>, the perfect match is 0, while in the case of <em>cosine similarity</em>, the perfect match is 1. Mathematically, we always calculate <em>cosine similarity</em> — texts are identical, if the angle between their vectors is 0 (<code>cos(0) = 1</code>), but since in the idea of distance, the perfect match is 0 (for example, in the cases of Euclidean and Manhattan distances), similarity must be converted into distance: <em>cosine distance</em> = 1 - <em>cosine similarity</em>.<a href="lesson-10.html#fnref8" class="footnote-back">↩</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="lesson-09.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="syllabus.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "github"]
},
"fontsettings": {
"theme": "white",
"family": "serif",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"toolbar": {
"position": "fixed"
},
"search": true,
"info": true
});
});
</script>

</body>

</html>
